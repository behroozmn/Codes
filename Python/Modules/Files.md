
# 1. فایل: `__init__.py`

## 1.1.توضیحات

- یک فولدر(دایرکتوری) حاوی فایل __init__.py بعنوان یک package(بسته) شناخته می‌شود و بدون این فایل پایتون نمی‌تواند دایرکتوری را به‌عنوان یک بسته شناسایی کند
- هرگاه یک بسته(ماژول) import شود، آنگاه کد داخل این فایل به منظور راه‌انداز(پیکربندی ماژول‌ها) اجرا می‌شود
- وقتی یک package ایمپورت می‌شود، فایل __init__.py اولین چیزی است که اجرا می‌شود

### مزیت‌های Package بودن یک دایرکتوری

* فولدر می‌تواند شامل ماژول‌های دیگر یعنی FileName.py های دیگر باشد
* فولدر می‌تواند حاوی sub-packageهای دیگر باشد
* می‌توانید از importهای نسبی (relative imports) و ساختارهای پیچیده‌تر استفاده کنید
* سازماندهی و مدیریت ماژول‌ها و زیر بسته‌ها
* می‌توان initialization code را به اجرا درآورد تا در هنگام استفاده بصورت پیش‌فرض به اجرا درآید
*
*

### اگر یک دایرکتوری بسته یا Package نباشد

> یک فولدر حتی بدون __init__.py هم می‌تواند package باشد (implicit namespace package) که در پایتون 3.3 بعبعد ممکن شده است اما در این صورت

* آنگاه import نسبی (from . import ...) کار نمی‌کند.
* نمی‌توانید از __all__ کدهای اولیه‌سازی استفاده کنید.

## 1.2.مثال

فرض کنید دایرکتوری حاوی نظام و ساختارفایل زیر است



```
myproject/
│
├── main.py
└── mypackage/
    ├── __init__.py
    ├── module_a.py
    └── module_b.py
``` 



باوجود `__init__.py` در `main.py` می‌توانید بنویسید:

```python
from mypackage import module_a
``` 

 


و در فایل `module_a.py` می‌توانید بنویسید

```python
from . import module_b  # import نسبی
```



💡 بدون __init__.py، این . (نقطه) در import نسبی کار نمی‌کند.

## 1.3.کدنویسی دراین فایل

* هر بار این بسته مورد استفاده قرار بگیرد آنگاه لاگ بیاندازد که فلان بسته مورد استفاده قرار گرفته است

```python
print("Package is being imported!")
```

# 2.`__all__`

یک لیست از رشته‌ها (strings)  است که نام متغیرها، توابع، یا کلاس‌هایی هستند که وقتی از یک ماژول یا package از طریق import * استفاده می‌کنید، وارد می‌شوند

* می‌تواند در فایل‌های .py (ماژول) وجود داشته باشد.
* می‌تواند در فایل __init__.py (package) وجود داشته باشد.

## 2.1.دلایل استفاده

> کنترل دقیق بر روی آنچه قابل ایمپورت است


* 
* 
* 
* 
  - بدون __all__، وقتی از import * استفاده می‌کنید، تمام نام‌های عمومی یا PublicNames (با آندرلاین شروع **نمی‌شوند** که شامل توابع یا کلاس‌ها و متغیرها می‌شود) داخل ماژول ایمپورت می‌شوند 

## 2.2.نحوه تعریف

فرض کنید یک بسته با محتوی زیر دارد


```python
# mymodule.py

def greet():
    print("Hello")


def goodbye():
    print("Goodbye")


class Person:
    pass


__all__ = ['greet', 'Person']
```


حالا وقتی بنویسید: 



```python
from mymodule import *
```


فقط greet و Person ایمپورت می‌شوند.


