<div dir="rtl">

# 1. ๐ฐ๏ธ ConceptsAndProtocol

* ุดุจฺฉู ุชุญูู ูุญุชูุง ุง CDN[ContentDeliveryNetwork]: ุจูููโุณุงุฒ ุดุจฺฉูโ ุฌูุช ฺฉุงูุด ุฒูุงู ุชุญูู ูุญุชูุง ุจู ูุตุฑูโฺฉููุฏู ุนู ุฑุบู ุชูุฒุน ุณุฑูุฑูุง ุฏุฑ ููุงุท ุฌุบุฑุงูุง ฺฏููุงฺฏูู
    * highly-distributed platform of servers that helps minimize delays in loading web page content by reducing the physical distance between the server and the user. This helps users around the world view the same high-quality content without slow loading times
* Delay: ุฒูุงู ุณูพุฑ ุดุฏู ุจุฑุง ุดุฑูุน(ูุจู ุงุฒ ุดุฑูุน ุนูู)
* Latency: ุฒูุงู ุณูพุฑ ุดุฏู ุฌูุช ุฏุฑุงูุช ุจุงุฒุฎูุฑุฏ ฺฉ ุจุณุชู ุงุฑุณุงู ุดุฏู ู ุจู ููุตุฏ ุฑุณุฏู (ูพุณ ุงุฒ ุนูู)
    * ุฏุฑ ุฐุฎุฑูโุณุงุฒ ุนุฏุฏ ฑฐ ููโุซุงูู ูุฑุฒ ุงุณุช ู ุงฺฏุฑ ุจุดุชุฑ ุจุงุดุฏ ฺฉูุฏ ู ุงฺฏุฑ ฺฉูุชุฑ ุจุงุดุฏ ูุทููุจ ุงุณุช
* TTL(TimeToLeave)
    * ฺฉ ุงุฒ ูพุงุฑุงูุชุฑูุง ูพูฺฏ ฺฉู ููุช ุงุฒ ูุฑ ุฑูุชุฑ ุนุจูุฑ ฺฉูุฏ ฺฉ ุนุฏุฏ ุงุฒ ttl ฺฉุงูุด ูพุฏุง ุฎูุงูุฏ ฺฉุฑุฏ
    * ูุนูููุง ุฑูุชุฑูุง ุงุฒ ณฐ ุชุง ูุงุจ ุจุดุชุฑ ฺฉู ttl ฺฉู ุดูุฏ ุจุณุชู ุดุจฺฉู ุฑุง drop ูโฺฉููุฏููุฏุงุฑ ttl ุฏุฑ ุฏูุงุณโูุง ูุชูุงูุช ุงุณุช:ฑ-ุฏูุงุณโูุง ุงูพูโุณูุฑุณ 64 ฒ-ุฏูุงุณโูุง ูุงฺฉุฑูุณุงูุช128 ณ-ุฏูุงุณโูุง ุจุฑ ูพุงู ุณุณฺฉู ฒตต ูโุจุงุดูุฏ
* ุฏุฑ ูููฺฉุณ ุณูฺฉุชโูุง ูู ููุน ูุงู ูุณุชูุฏ(ุฏุฑ ูููฺฉุณ ููู ฺ ูุงู ุงุณุช)
* **Transparency**: ุงุณุชููุงู ูฺฉุงู ฺฉุงุฑุจุฑ ู ูฺฉุงู ูุฑุงุฑฺฏุฑ ููุงุจุนุ ุณุฑูุณ ููุฑุฏ ูุธุฑ
    * ฺฉุงุฑุจุฑุงู ุงุฒ ูฺฉุงูโูุง ูุฎุชููุ ุจู ฺฉ ูพูุดู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ ุฏุฑ ุญุงู ฺฉู ุฏุงุฏูโูุง ููุฌูุฏ ุฏุฑ ูพูุดู ุฏุฑ ูฺฉุงู ูุง ูุฒฺฉ ูุฌุฒุง ุจุฑ ุฑู ูุงุฑุฏุฏุณฺฉ ฺฉุงููพูุชุฑูุง ูุชูุงูุช ุจุฑ ุฑู ุดุจฺฉู ูุฑุงุฑ ุฏุงุฑูุฏ ู ุจุฑุง ฺฉุงุฑุจุฑุงู(ูุฑ ูฺฉุงู) ูุงุจู ููุณ ููโุจุงุดุฏ
    * The main benefit of location transparency is that it no longer matters where the resource is located.Depending on how the network is set, the user may be able to obtain files that reside on another computer connected to the particular network
* ููููู Scale-Up(Vertical Scaling):ุงูุฒูุฏู ููุงุจุน ุณุฎุชโุงูุฒุงุฑ ููโุชุฑ ูุซู ุฑู ุง ูพุฑุฏุงุฒูุฏู(ุฎุฑุฏ ุณุฑูุฑ ุฌุฏุฏ ููู)
* ููููู Scale-Out (Horizontal Scaling): ุงูุฒูุฏู ุณุฑูุฑูุง ุฌุฏุฏ ุจู ฺฉ ุฎูุดู ู ุงูุฒุงุด ุธุฑูุช Cluster ุงุฒ ุทุฑู ุดุจฺฉู
* NOC ูุฎูู Network Opration Center ุงุณุช

# 2. ๐ฐ๏ธARP

## 2.1. ๐ฑ๏ธ Commands

### 2.1.1. โ๏ธarp

* ูพุฑูุชฺฉู arp: ฺู ูฺฉโุขุฏุฑุณ ุจู ฺู ุขโูพ ูุชุตู ุงุณุช
* ุจุณุชูโูุง ูพุฑูุชฺฉู ARP ุงุฒ ุฑูุชุฑ ุนุจูุฑ ููโฺฉููุฏ


* [-e]: display (all) hosts in default (Linux) style
    * `sudo arp -e`
* [-n|--numeric]:don't resolve names
    * `sudo arp -n`

### 2.1.2. โ๏ธarp-scan

```shell
arp-scan -I enp4s0 10.0.20.0/24
arp-scan --interface enp4s0 10.0.20.0/24
arp-scan --interface enp4s0 --localnet
```

# 3. ๐ฐ๏ธIP

* RG45
    * ุฏุฑ ุจุนุถ ุงุฒ ูุฏูโูุง ุงุฑุชูุงุกุงูุชู ุขู ุณุฑุนุช 10Gb ูู ุงุฑุงุฆู ูโุฏูุฏ

## 3.1. ๐ฑ๏ธBonding

* ุงู ูุงุจูุช ุงูฺฉุงู ูุฌุชูุน ุดุฏู ฺูุฏ ฺฉุงุฑุช ุดุจฺฉู ู ุงุณุชูุงุฏู ุงุฒ ุขููุง ุจู ุตูุฑุช ฺฉ ฺฉุงุฑุช ุดุจฺฉู ุฑุง ูุฑุงูู ู ฺฉูุฏ. ูุงู ุฏฺฏุฑ ุขู NIC Teaming ู Link Aggregate ุงุณุช. ุงู ุฑูุด ุฏุงุฑุง ูุฏูุง ูุฎุชูู ุงุณุช ฺฉู ุนุจุงุฑุชูุฏ ุงุฒ:
* mode=0(balance-rr) โ mode=1(active-backup) โ mode=2(balance-xor) โ mode=3(broadcast) โ mode=4(802.3ad) โ mode=5(balance-tlb) โ mode=6(balance-alb)
* ุฏุฑ ูุฏูุง ฐ ู ฒ ู ณ ู ด ุชูุงู ูพูุฑุช ูุง ฺฉ ฺฏุฑูู ู ุจุงุณุช ุจู ฺฉ logical switch ูุชุตู ุดููุฏ ุงูุง ุฏุฑ ูุฏูุง ฑ ู ต ู ถ ูพูุฑุช ูุง ฺฉ ฺฏุฑูู ู ุชูุงููุฏ ุจู ุณูุฆฺ ูุง ูุฎุชูู ูุชุตู ุดููุฏ. ูุฑ ฺูุฏ ฺฉู ู ุชูุงู ุจุง aggregate ฺฉุฑุฏู ฺูุฏ ุณูุฆฺ ูุฒฺฉุงู ููู ุขููุง ุฑุง ุจู ฺฉ logical switch ุชุจุฏู ฺฉุฑุฏ.
* ุชูุงู ูุฏูุง ุจุงูุง ุฏุฑ ุณู ุฏุณุชู ฺฉู ูุฑุงุฑ ู ฺฏุฑูุฏ:
    * FailOver Only: ุชููุง ูุฏ active-backup ุฏุฑ ุงู ุฏุณุชู ูุฑุงุฑ ู ฺฏุฑุฏ. ููุช ููฺฉ ุงุตู fail ุดุฏ ููฺฉ ุฏูู ุฌุงฺฏุฒู ุขู ู ุดูุฏ.
    * Require Switch Support: ูุฏูุง balance-rr ู ธฐฒ.ณad ู balance-xor ูุณุชูุฏ ฺฉู ุจุงุฏ ุณูุฆฺ ูุฒ ุงุฒ ุขููุง ูพุดุชุจุงู ููุงุฏ.
    * Generic Modes: ุฏุฑ ูุฏ broadcast ุชูุงู ุชุฑุงูฺฉ ุงุฒ ุชูุงู ูพูุฑุชูุง ุนุถู ฺฏุฑูู ุฎุงุฑุฌ ู ุดููุฏ. ุฏุฑ ูุฏ balance-tlb ุชุฑุงูฺฉ ุฎุฑูุฌ load balance ู ุดูุฏ ุงูุง ุชุฑุงูฺฉ ูุฑูุฏ ููุท ุงุฒ ฺฉ ููฺฉ ู ุขุฏ. ุฏุฑ ูุฏ balance-alb ูุฒ ุชูุงู ุชุฑุงูฺฉ ุงุฑุณุงู ู ุฏุฑุงูุช load balance ู ุดูุฏ ู ุงุฒ ุฑูุด change MAC address ุงุณุชูุงุฏู ู ฺฏุฑุฏุฏ.
* ุณุฎู ุขุฎุฑ ุงูฺฉู ุงฺฏุฑ ุดูุง ุฏุฑ ูุญุท ฺฉุงุฑ ู ฺฉูุฏ ฺฉู ุณูุฆฺ ูุง ุงุฒ ธฐฒ.ณad ุง ููุงู LACP ูพุดุชุจุงู ู ฺฉููุฏุ ุจูุชุฑู ุฑูุด ููู ูุฏ ุงุณุช. ุงูุง ุงฺฏุฑ ุณุงูพูุฑุช ุณูุฆฺ ูุฏุงุฑุฏ ู ูู ู ุฎูุงูุฏ load balance ุฏุงุดุชู ุจุงุดุฏ ู ูู fault tolerance ุจูุชุฑู ุฑูุด balance-alb ุงุณุช. ุฏุฑ ููุงุช ุงฺฏุฑ ู ุฎูุงูุฏ ููุท ุจู ุฏู ุณุฑูุฑ replication ุฏุงุดุชู ุจุงุดุฏุ ูุฏ balance-rr ุจุฑุง ุดูุง ุจูุชุฑ ุงุณุช.

## 3.2. ๐ฑ๏ธFiber Ethernet

ููุงู ุณุงุฒูฺฉุงุฑ RG45 ฺฉู ุจู ูุจุฑ ุชุจุฏู ุดุฏู ุงุณุช ู ุจุง IP ฺฉุงุฑูฺฉูุฏ

* Fiber Ethernet Card
    * ุฏู ุนุฏุฏ ฺุฑุงุบ LED ุฏุงุฑุฏ
    * ุณุงูพูุฑุช ฺฉููุฏู ูพุฑูุชฺฉู ุงุชุฑูุช ู ูู ยซูพุฑูุชฺฉู ุงูโุณยป
    * Speed: 10G or 40G or 100G or 200G
    * Uniq Identify: IP
    * ูุงฺููโูุง SFP ุจู ฺฉุงุฑุช ูุชุตู ู ฺฉุงุจู ุจู ุงู ูุงฺููโูุง ูุชุตู ุฎูุงููุฏ ุดุฏ
    * ฺฉุงููุฏูุง ฺฉู ุงู ููุฑุฏ ุฑุง ูพูุดุด ูโุฏููุฏ
        * iftop
        * iptraf-ng
        * nload
        * tcpflow

## 3.3. ๐ฑ๏ธCommands

### 3.3.1. โ๏ธiperf

```shell
node1: iperf -s
node2: iperf -c <HOST>

#FromSobhanSadatNejad:
node1: iperf3 -s -i 1
node2: iperf3 -u -c 10.10.12.10 -w 1M -i 10 -t 60       
```

# 4. ๐ฐ๏ธICMP

## 4.1. ๐ฑ๏ธCommands

### 4.1.1. โ๏ธfping

`fping -g 192.168.10.1 192.168.10.5 #alive hosts`

# 5. ๐ฐ๏ธDNS

## 5.1. ๐ฑ๏ธCommand

### 5.1.1. โ๏ธdig

```shell
dig <name>
dig +short <Name>  #ุงุทูุงุนุงุช ุงุถุงูู ูุดุงู ูุฏู ู ููุท ุขโูพ ุฑุง ููุงุด ุจุฏู
```

### 5.1.2. โ๏ธnslookup

```shell
nslookup -querytype=mx domain.ir #ูพุฏุง ฺฉุฑุฏู ุงููโุณุฑูุฑ ฺฉ ุฏุงูู
nslookup <name>
```

## 5.2. ๐ฑ๏ธBind

Bind

- Top Level Domain ุง TLD : ุณุทุญ com ุง ir ุง net ุง org ุฏุฑ DNS
- First Level Domain ุง FLD : ูุงู itsee ุฏุฑ ุฏุงููู itsee.ir
- ICANN: ุณุงุฒูุงู ฺฉู ูุงูโูุง DNS ุนู TLD ุง FLD ุฑุง ูุฏุฑุช ูโฺฉูุฏ
- DNSSec : ูพุงุณุฎ ฺฉู ุงุฒ ุณุฑูุฑ ูุขุฏ ุฑุง sign ูฺฉูุฏ ู ูู ูุทูุฆู ูุดูู ฺฉู ุฏููุง ุงุฒ ุณุฑูุฑ ููุตุฏ ุขูุฏู
- ุฏุณุชูุฑ named-checkzone ุง named-checkconf : ุจุฑุฑุณ ุตุญุช ุงุทูุงุนุงุช ููุฌูุฏ ุฏุฑ ูุงู ุชูุธูุงุช
- ุฏุชุง ูพุณ ุงุฒ resolve ุดุฏู ฺฉุด ูโุดูุฏ ู ููุจุช ุจุนุฏ ุฎู ุณุฑุนโุชุฑ resolve ูพุงุณุฎ ุฏุงุฏู ุฎูุงูุฏ ุดุฏ
- DNS Master: ุณุฑูุฑ ฺฉู ุงุฏุนุง ูฺฉูุฏ ุตุงุญุจ ฺฉ ุฒูู ุงุณุช(ุนู ุฎูุฏู ุฌูุงุจ ุฑุง ุจูุฏู) ู ููฺูู ููุงุฑุฏ ฺฉู ุจูุฏ ูุณุช ุฑุง ุงุฒ Forward ูโูพุฑุณุฏ
- ุฏุฑ DNS ุฏุฑ ูุงู zone ููุฏุงุฑ TTL ุจุฑุญุณุจ ุซุงูู ุงุณุช ู ูฺฏูุฏ ุงู ุฑฺฉูุฑุฏ ุชุง ููุงู ุซุงูู ูุนุชุจุฑ ุงุณุช
- ุฏุฑ DNS ุฏุฑ ูุงู zone ุฏุฑ ูุฑ ุฒูู ุจุงุฏ ุญุฏุงูู ฺฉ SOA ุนู Start Of Authority ุฏุงุดุชู ุจุงุดูุฏ ฺฉู ูุนุฑู ุงุทูุงุนุงุช ุงุณุช
- ุฏุฑ DNS ุฏุฑ ูุงู zone ุนูุงูุช @ ุจู ูุงู ุฒูู ุงุดุงุฑู ุฏุงุฑุฏ ฺฉู ููโุฎูุงูุฏ ูุฑุฏูุนู ูุงู ุขู ุฑุง ุชฺฉุฑุงุฑ ฺฉูุฏ- ุฏุฑ DNS ุฏุฑ ูุงู zone ุนุจุงุฑุช ุนุฏ ุงุฒ SOA ูุงู ุฏุงููู ู ุนุจุงุฑุช ุจุนุฏ ุขุฏุฑุณ ุงูู ุจู ุดฺฉู ุจุฏูู @ ุขูุฑุฏู ูโุดูุฏ ฺฉู ุฌุง ููุทู ุนูุงูุช @ ูโฺฏุฐุงุฑู
- ุฏุฑ DNS ุฏุฑ ูุงู zone ูุฑ ุจุงุฑ ฺฉู ุงู ูุงู ุฑุง ุชุบุฑ ุจุฏูู ุจุงุฏ ุนุฏุฏ serial ุฑุง ฺฉ ุนุฏุฏ ุจุงูุงุชุฑ ุจุจุฑู ุชุง DNS ุขู ุฑุง ููุฏ ููุงุฏ
- ุฏุฑ DNS ุฏุฑ ูุงู zone ฺฉููู cname ฺฉ alias ุงุณุช ฺฉู ููุถูุน www ุฒุฏู ุง ูุฒุฏู ุฑุง handle ูฺฉูุฏ

![Bind9.png](_srcFiles/Images/Bind9.png "Bind9.png")
![Bind9_Zone.png](_srcFiles/Images/Bind9_Zone.png "Bind9_Zone.png")

# 6. ๐ฐ๏ธSwitch

* ุณูฺ ูุงูฒูุณุช(ููุงูู ูฺฉ ู ุฌุฏููarp)
* ุจุง ฺฏุฐุฑ ุงุงูุ ุณูฺ ุฏุฑ ูุงูณูุฑูุฏ ฺฉุฑุฏ(ููุงูู ุฑูุชูฺฏ) ู ุขโูพ
* VLAN: ุฏุฑ VLAN ฺฏู ฺฉ ุณูฺโฺฉุงูู ุฑุง ุฏู ุชฺฉู ูโฺฉูู
* TrunkPort
    * ูพูุฑุช ุชุฑุงูฺฉ ุจู ุฏู ุณูฺ ูุนู ูพุฏุง ูโฺฉูุฏ
    * ูพูุฑุช ฺฉู ูุธูู ุงูุชูุงู ุชุฑุงูฺฉ ุจู VLAN ูุง ุฏุฑ ุณูฺ ุฑุง ุฏุงุฑุฏ
    * ุฏุฑ ุฏู ุณูฺโฺฉุงููโ ุงุฒ ูุณุท ุดฺฉุณุชู ุดุฏู(ดุชฺฉู ุดุจฺฉู ูุฌุฒุง) ุงู ุชฺฉู ุดุจฺฉูโูุง ุงุฒ ุทุฑู ูพูุฑุช ุชุฑุงูฺฉุช ุจู ูู ูุตู ูโุดููุฏ
* StackableSwitch:
* Port Group: ฺฉ ููููู ุฏุฑ ูุฌุงุฒโุณุงุฒ ุดุจฺฉู ุงุณุช ฺฉู ุจู ูุฌููุนูโุง ุงุฒ ูพูุฑุชโูุง ุดุจฺฉู ูุฌุงุฒ ุงุดุงุฑู ุฏุงุฑุฏ. ุงู ฺฏุฑูู ุจู ูุงุดูโูุง ูุฌุงุฒ (VMs) ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุจู ฺฉุฏฺฏุฑ ู ุจู ุดุจฺฉูโูุง ุฎุงุฑุฌ ูุชุตู ุดููุฏ.

![trunk.jpg](./_srcFiles/Images/trunk.jpg "trunk.jpg")

> StackableSwitch
![switch-stack.png](./_srcFiles/Images/switch-stack.png "switch-stack.png")

# 7. ๐ฐ๏ธRouter

* **RoutingTable**: ุงฺฏุฑ ฺฉ ูููฺฉุณ ุฑูุชุฑ ุดุฏ ู ุชุนุฏุง ฺฉุงุฑุชโุดุจฺฉู ุฒุงุฏ ุจุงุดุฏ ูพุณ ูููฺฉุณ ุจุงุฏ ุฏุฑ ุฎุงุทุฑ ุฎูุฏุด ูฺฏูุฏุงุฑ ููุงุฏ ฺฉู ุจุฑุง ุงุฑุณุงู ุจุณุชู ุจู ูุงุณุช ุงุฒ ฺู ุงูุชุฑูุณ ุงุณุชูุงุฏู ฺฉุฑุฏู ุงุณุช. ุจูุงุจุฑุงู ูุงุฒ ุจู ฺฉ routing table ุฏุงุฑุฏ ุชุง ูุดุงู ุฏูุฏ ฺฉู ุงุฒ ฺฉุฏุงู ุงูุชุฑูุณ ุจุฑุง ุงุฑุณุงู ุจุณุชู ุจู ูุงุณุช ุงุณุชูุงุฏู ฺฉุฑุฏู ุงุณุช
* **RIP(Router Information Protocol)**: ูููฺฉุณ ุจุฑุง ุณุงูพูุฑุช ฺฉุฑุฏู RoutingTable ุงู ูพุฑูุชฺฉู ุฑุง ุงุฌุงุฏ ฺฉุฑุฏู ุงุณุช ุชุง ฺฉุงุฑูุง ุฑูุช ุฑุง ุงูุฌุงู ุฏูุฏ. ุฒูุงู ฺฉู ฺฉ ุจุณุชู RIP ุฑุณุฏ ุขูฺฏุงู ูููฺฉุณ RoutingTable ุฑุง ุจุฑูุฒุฑุณุงู ูโฺฉูุฏ. ูููฺฉุณ ุงุฒ ุจุฑูุงูู routed ุจุฑุง Listen ฺฉุฑุฏู ุจุณุชูโูุง RIP ู ุจุฑูุฒุฑุณุงู ุฌุฏูู ุงุณุชูุงุฏู ูโฺฉูุฏ

## 7.1. ๐ฑ๏ธLinuxRouter

* ุงฺฏุฑ ูพุงุฑุงูุชุฑ ฺฉุฑูู System.Net.Route ู net.ipv6.conf.all.forwarding ุจุฑุงุจุฑ ฑ ุจุงุดูุฏ ู ุฏุฑ iptables ุฏุฑ chain ุจูุงู FORWARD ูุงููู ุงุถุงูู ฺฉุฑุฏู ุขูฺฏุงู ูููฺฉุณ ูุงุจูุช ุฑูุชุฑ ุดุฏู ูพุฏุง ุฎูุงูุฏ ฺฉุฑุฏ ุนู ุจุณุชูโูุง ุฑุง ุงุฒ ฺฉ ุงูุชุฑูุณ ุจู ุงูุชุฑูุณ ุฏฺฏุฑ ุงูุชูุงู ุฏูุฏ
*

## 7.2. ๐ฑ๏ธCOMMANDS

### 7.2.1. โ๏ธmtr

```shell
mtr google.com
mtr -n --report IP
```

### 7.2.2. โ๏ธtraceroute

```shell
traceroute google.com
```

# 8. ๐ฐ๏ธProxy

* ุณุงุชโูุง ุฒุฑ ุจุฑุง ุชุณุช ูพุฑูฺฉุณ ููุฏ ุงุณุช
    * ifconfig.me
    * ping.eu

## 8.1. ๐ฑ๏ธOpenVPN

* ฺฉ ุงุฒ ุฑูุดโูุง ูโูพโุงู ุฒุฏู ุงุณุช ฺฉู ุจุงุฏ ุงูู ุจุณุชู ุขู ุฑุง ูุตุจ ููุงู ู ูพุณ ุงุฒ ูุตุจ ุฏู ูุงู ุฏุฑ ูุณุฑ ูุง etc/openvpn/server.conf ู etc/openvpn/client.conf ุงุฌุงุฏ ูโููุงุฏ ฺฉู ุชูุธูุงุช ุงุตู ุงู ูุงูโูุง ุจู ุดุฑุญ ุฒุฑ ุงุณุช:[config]: ุงุณุชูุงุฏู ุงุฒ ูุงู ุจุฑุง ูฺฏูุฏุงุฑ ุชูุธูุงุช
    * [dev]: ูุงู ุฏูุงุณ ูุฌุงุฒ ฺฉู ุฏุฑ ุฏุณุชูุฑ ifconfig ููุงุด ุฏุงุฏู ุฎูุงูุฏ ุดุฏ
    * [nobind]: ุณุงุฎุช ุชููู ุจุฏูู local network address ุง ูพูุฑุช
    * [ifconfig]: ุชูุธู ุขโูพ ุจู ูุจุฏุง ู ููุตุฏ
    * [secret]: ูุงู ุงุฒ ุชูุธูุงุช ุฑูุฒูฺฏุงุฑ ฺฉู ุฏุฑ ุฏู ุญุงูุช ูโุชูุงูุฏ ุจุงุดุฏ:
        1. Static key encryption: ูู ุณุฑูุฑ ู ูู ฺฉูุงูุช ุงุฒ ฺฉ ฺฉูุฏ ุฑูุฒูฺฏุงุฑ ูุดุงุจู ุงุณุชูุงุฏู ูโฺฉููุฏ
        2. Public key encryption: ูู ุณุฑูุฑ ู ูู ฺฉูุงูุช ุจุฑุง ุฎูุฏุดุงู ฺฉูุฏ ุนููู ู ุฎุตูุต ุชููุฏ ูฺฉููุฏ ู ุงุฒ ุขู ุทุฑู ูุชุตู ูโุดููุฏ
* ุงุณุชูุงุฏู ุงุฒ ุฑูุด Static key encryption ุฏุฑ openVPN:
  ```shell
  openvpnโgenkeyโsecret secret.key #run on server
  openvpnโgenkeyโsecret secret.key #run on client
  
  vim server.conf
  dev tun
  ifconfig 192.168.1.10 10.0.1.1
  keepalive 10 60
  ping-timer-rem
  persist-tun
  persist-key
  secret secret.key
  
  sudo openvpn server.confsudo openvpn client.conf
  ```

![openvpn.png](./_srcFiles/Images/openvpn.png "openvpn.png")

## 8.2. ๐ฑ๏ธTor

* ุงุฒ ููุงุฑุฏ ูุดุงุจู ุชูุฑ ูโุชูุงู ุจู proxychains4 ู privoxy ุงุดุงุฑู ฺฉุฑุฏ ฺฉู ููุงููุฏ torsocks ุฏุฑ ุงุจุชุฏุง ุฏุณุชูุฑุงุช ูุฑุงุฑ ูโุฏูู.
* ูพูุฑุช ูพุดโูุฑุถ ุชูุฑ 9050 ุงุณุช
* ูุณุฑ ูุงฺฏ ุชูุฑ
    * `/etc/tor/torrc` ุชูุธูุงุช ุชููุฏ ูุงฺฏ ุฑุง ุงุฒ ฺฉุงููุช ุฎุงุฑุฌ ููุงุฏ
    * /var/log/tor/notices.log
    * /var/log/tor/debug.log
* [PythonCode: change Ip periodicatly](https://github.com/FDX100/Auto_Tor_IP_changer)
    * cd Auto_Tor_IP_changer
    * sudo apt-get install tor
    * sudo apt-get install privoxy
    * python3 autoTOR.py
* [url](https://pentestcore.com/tor-ip-change/)

```shell
kill -HUP `pidof tor` ุฏุฑุงูุช ุขโูพ ุฌุฏุฏ ุจุฑุง ุชูุฑ
export http_proxy="socks4://localhost:9050" #ุงฺฏุฑ ุจุฎูุงูู ุฏุฑ ฺฉ ุดู ฺฉู ุฏุฑ ุณุณุชู tor ูุตุจ ุงุณุช ุชูุงู ููุงุฑุฏ ุฑุง ูพุฑูฺฉุณ ฺฉูู
torsocks curl https://showip.net # Test Ip Adderess
```


## 8.3. ๐ฑ๏ธV2Ray

* ูพุฑูุชฺฉู VPN ุงุณุช
* Header ุงู ูพุฑูุชฺฉู ุงุฒ ููุน WebSocket ุงุณุช


# 9. ๐ฐ๏ธDHCP

* ููฺฏุงู ฺฉู ุจุฑูุงูู dhclient ูุณุช ุณุฑูุฑูุง NTP ุฑุง ุงุฒ DHCP ูโฺฏุฑุฏ ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ูุงู ntp.conf ูุฑุงุฑ ูุฏูุฏ. ุจุฑุง ุฌููฺฏุฑ ุงุฒุงู ููุถูุน ุนุจุงุฑุช PEERNTP=no ุฑุง ุฏุฑ ูุงู /etc/sysconfig/network ูุฑุงุฑ ุฏูุฏ

# 10. ๐ฐ๏ธSamba

Directory Services

* LDAPุ OpenLDAP ู Active Directory ููฺฏ ูุฑุจูุท ุจู ุณุฑูุณโูุง ุฏุงุฑฺฉุชูุฑ (Directory Services) ุฏุฑ ุดุจฺฉู ูุณุชูุฏ

## 10.1. ๐ฑ๏ธConcept

* Samba: ุณุฑูุณ ูููฺฉุณ ู openSource ุจุฑุง ูพุฑูุชฺฉู SMB ฺฉู ูุงุจูุช ููุงููฺฏ ุณุฑูุฑูุง ูููฺฉุณ ุฑุง ุจุง ููุฏูุฒ ูุณุฑ ูโุณุงุฒุฏ ุชุง ุงู ุฏู ุณุฑูุฑ ูุชูุงูุช ุจุชูุงููุฏ ุงุฒ share ฺฉุฏฺฏุฑ ุงุณุชูุงุฏู ููุงูุฏ
* ุจูโุตูุฑุช ุณูุช ุงุฒ ุณู ุจุฎุด ุงุตู(ุชุญุช ุนููุงู daemon) ุชุดฺฉู ุดุฏู ุงุณุชฑ-nmbd ุจุฑุง ูุฏุฑุช NetBIOS ฒ-smbd ุจุฑุง ุงุดุชุฑุงฺฉ ูุงูณ-webbindd ุจุฑุง authentication ฺฉุงุฑุจุฑุงู ฺฉู ูุซูุง ุจุชูุงูุฏ ุจู ุงฺฉุชู ุฏุงุฑฺฉุชูุฑ ู ฺฉุงุฑุจุฑุงู ูููฺฉุณ ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ููุงุฏ
* ุชูุตู ูุดูุฏ ฺฉู ุณุงุนุช ุณุฑูุฑ ุชูุณุท ุณุฑูุณ ntp ุฏูู ุชูุธู ุดูุฏ ุชุง ุจุง ุฏฺฏุฑ ุณุฑูุฑูุง ูุธุฑ DomainController ูุง ููุณุงู ุจุงุดุฏ
* ูพุฑูุชฺฉู SMB ุฏุงุฑุง ุณุฑูุณ smbd ุงุณุช ฺฉู ููุฌุจ ุงุดุชุฑุงฺฉ ูุงู ูโุดูุฏ ฺฉู ุชูุธูุงุช ุขู ุฏุฑ ูุณุฑ smb.conf ููุฌูุฏ ุฏุฑ ูุณุฑ etc/samba ูุฑุงุฑ ุฏุงุฑุฏ
* ุฏุฑ ูุงู smb.conf ุญุณุงุณุช ุจู ุญุฑูู ุจุฒุฑฺฏ ู ฺฉูฺฺฉ ูุฌูุฏ ูุฏุงุฑุฏ ู ูุฑฺุฒ ุจุนุฏ ุงุฒ ุณูฺฉุงููู ู ุนูุงูุช ูุดุชฺฉ ุจุนููุงู ฺฉุงููุช ุชูู ุฎูุงูุฏ ุดุฏ
* ูุงุจูุช ุจุฑุฑุณ ุตุญุช ุชูุธูุงุช ูุงูโูุง ุชูุธูุงุช ุงุฒุทุฑู ุฏุณุชูุฑ testparm ูุฌูุฏ ุฏุงุฑุฏ
* ุจุฑุฑุณ ุตุญุช ุชูุธูุงุช ุฏุงุฎู smb.conf ุชูุณุท ุฏุณุชูุฑ testparm ุตูุฑุช ูโฺฏุฑุฏ
* CIFS ูุฎูู CommonInternetFileSystem:ูพุฑูุชฺฉู ฺฉู ุดุฑฺฉุช ูุงฺฉุฑูุณุงูุช ุฏุฑ ุณุงู ฑนนฐ ุจุฑุง ฺฉุงุฑ ุฏุฑ ูุฑูโุงูุฒุงุฑูุง ุฎูุฏุด ุงฺุงุฏ ฺฉุฑุฏ
* SMB: ูพุฑูุชฺฉู ูพุดุฑูุชู ุดุฏู CIFS ูุณุช
* SMB: ServiceMessageBlock
*

## 10.2. ๐ฑ๏ธPorts

* 53 [TCP,UDP]: Internal DNS only
* 88 [TCP,UDP]: Kerberos
* 135 [TCP]: End point resolution514
* 137 [TCP,UDP]: NetBIOS name service
* 138 [TCP,UDP]: NetBIOS datagram service
* 139 [TCP,UDP]: NetBIOS session service
* 389 [TCP,UDP]: Lightweight Directory Access Protocol(LDAP)
* 445 [TCP]: SMB over TCP
* 464 [TCP,UDP]: Kerberos kpasswd
* 636 TCP LDAP over SSL (LDAPS)
* 901 [TCP,UDP]: Samba Web Administration Tool (SWAT)
* 1024-5000 [TCP]: Dynamic RPC service ports
* 3268 [TCP]: Microsoft Global catalog
* 3269 [TCP]: Microsoft Global catalog over SSL
* 5353 [TCP,UDP]:Multicast DNS

```shell
systemctl status smb | grep PID # ูููุฏู ูพูุฑุชโูุง ุจุงุฒ ุงุฒ ุทุฑู pid
ss -utlpn | grep <PIDnumber>    # ูููุฏู ูพูุฑุชโูุง ุจุงุฒ ุงุฒ ุทุฑู pid
pdbedit -Lv #ูุดุงูุฏู ุฌุฒุฆุงุช ุงุฒ ฺฉ ูุฒุฑ ุฏุฑ ุณุงูุจุง ู ุฏุฑุตูุฑุช ูุงุฒ ูโุชูุงู ุจุฎุด ุงุฒ ุชูุธูุงุช ุขู ุฑุง ุชุบุฑ ุฏุงุฏ

#ุนูู mount ฺฉุฑุฏู ฺฉ ูุณุฑ ุงุฒ ุณุฑูุฑ ุจู ฺฉ ูุณุฑ ุงุฒ ฺฉูุงูุช(ุฏุณุชูุฑ ุฒุฑ ุฏุฑ ฺฉูุงูุช ุฒุฏู ูโุดูุฏ). ูฺฉุชู ฺฉุฑูู ุจุงุฏ cifs ุฑุง ุจูููุฏ
mount -o username=<username>,noperm //192.168.56.102/<path> <mountPoint such as /mnt>
mount -t cifs -o username=<username>,noperm //192.168.56.102/<path> <mountPoint such as /mnt>
mount.cifs -o username=<username>,noperm //192.168.56.102/<path> <mountPoint such as /mnt>

# ุงุชุตุงู ููุดฺฏ ฺฉ ูุณุฑ ุงุฒ ุณุฑูุฑ ุจู ฺฉ ูุณุฑ ุงุฒ ฺฉูุงูุช
/etc/fstab: //192.168.56.102/ssharea /home/Malcolm/csharea cifs credentials=/etc/samba/<Name such as behrooz>,noperm,uid=<User UUID with command: [pdbedit -L]> 0 0
cat /etc/samba/behrooz
username=<username>
password=<password>
```

* ุจุฑุง ุงุดุชุฑุงฺฉ ูุงู ู ฺฉุงุฑูุง ุงุฒู ูุจู ุฏุณุชูุฑุงุช ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุดุฑุญ ุขู ุฏุฑ ุฒุฑ ุขูุฑุฏู ุดุฏู ุงุณุช
    * [mount.cifs]: ฺฉุงุฑ mount ูููุฏู ฺฉ ุฏุชุง ุงุดุชุฑุงฺฉ ุฑุง ุฏุฑ ุณูุช ฺฉูุงูุช ุจุฑุนูุฏู ุฏุงุฑุฏ
    * [net]: ููุงููุฏ ุฏุณุชูุฑ net ุฏุฑ ููุฏูุฒ ฺฉุงุฑ ูุฏุฑุช ฺฉ ุณุฑูุฑ ุณุงูุจุง(ููฺูู ุณุฑูุฑ ุฑููุช) ุฑุง ุจุฑุนูุฏู ุฏุงุฑุฏ
    * [nmblookup]: ุฌุณุชุฌู ุงุทูุงุนุงุช NetBIOS ูุธุฑ ูุงู workgroup ุง ุขโูพ ู ุฏฺฏุฑ ููุงุฑุฏ
    * [pdbedit]: ูุฏุฑุช ุฏุชุงุจุณ ฺฉุงุฑุจุฑุงู(ูุฑ ฺฉุงุฑุจุฑ) ุดุงูู ldapsam ู smbpasswd ู tdbsam
    * [rpcclient]: ุชุนุฑู ุงูฺฏูุณ ุขู ุนู Executes Samba client Microsoft Remote Procedure Call functions
    * [smbcacls]: ููุงุด ุง ุงุตูุงุญaccessControlList ูุงูโูุง ุจูโุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ุณุงูุจุง
    * [smbclient]: ุงุชุตุงู ุง ููุงุด ูุณุช ูุงูโูุง ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ฺฉู ููุช ุจู ฺฉ ูููุฏุฑ ุงุฒ ุณุฑูุฑ ูุชุตู ูโุดูู ุขูฺฏุงู ุจุง ุฏุณุชูุฑุงุช ููุงููุฏ FTP ูโุชูุงูู ุจุง ูุงูโูุง ฺฉุงุฑฺฉูู
    * [smbcontrol]: ูุฏุฑุช ุฏูู(daemon) ุง ุณุฑูุณ smbd
    * [smbmount]: ุงูุฏุงู mount ฺฉ ุฏุชุง ุงุดุชุฑุงฺฉ ุณุงูุจุง ุจุฑ ุฑู ฺฉูุงูุช ฺฉู ุฌุงฺฏุฒู mount.cifs ุดุฏู ุงุณุช
    * [smbpasswd]: ูุฏุฑุช ุฏุชุงุจุณโูุง smbpasswd ุง tdbsam
    * [smbspool]: ุงุฑุณุงู ูุงู ุจู ฺฉ ูพุฑูุชุฑ ุงุดุชุฑุงฺฉ ุณุงูุจุง
    * [smbstatus]: ููุงุด ูุถุนุช ุงุชุตุงู ุณุงูุจุง ุณุฑูุฑ
    * [smbtar]: ุงุฌุงุฏ ฺฉ ุจฺฉุงูพ ุงุฒ ุงุณุชุฑุงฺฉ ูุงูโูุง ุณุงูุจุง ุฏุฑ ฺฉ regularFile ุง tapeDevice ููฺูู ุนูู ุฑุณุชูุฑ ูููุฏู ุขู ูุง
    * [testparm]: ุจุฑุฑุณ ุณูฺฉุณ ูุงู smb.conf
    * [wbinfo]: ููุงุด ุงุธูุงุนุงุช ุณุฑูุณ (ุฏูู) winbindd ุงุฒ ุณุงูุจุง

## 10.3. ๐ฑ๏ธPasswordSet

```shell
#ูโุชูุงูู ุจุฑุง ฺฉ ูุฒุฑ ุณุณุชู (ฺฉู ุฎูุฏ ุตุงุญุจ ูพุณูุฑุฏ ุณุณุชู ุงุณุช) ฺฉ ูพุณูุฑุฏ ุงุฒ ููุน ุณุงูุจุง ูู ุจุฏูู ูพุณ ฺฉ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุงุฌุงุฏ ูโฺฉูู
adduser behrooz
passwd behrooz

#ุจุฑุง ุขู ูพุณูุฑุฏ ูุฑุงุฑ ูโุฏูู: [ุณูฺ a]: ููุฌุจ ูโุดูุฏ ุชุง ูุฒุฑ ุจุงุฏ ุจู ูุงูsmbpasswd ูู ุงุถุงูู ุจุดูุฏ
smbpasswd -a behrooz # ุจุง ุงู ฺฉุงุฑ ูุงู /var/lib/samba/account_policy.tdb ุจุตูุฑุช ุฎูุฏุจุฎูุฏ ุขูพุฏุช ุฎูุงูุฏ ุดุฏ
pdbedit -Lv          #ูุดุงูุฏู ุฌุฒุฆุงุช ุงุฒ ฺฉ ูุฒุฑ ุฏุฑ ุณุงูุจุง ู ุฏุฑุตูุฑุช ูุงุฒ ูโุชูุงู ุจุฎุด ุงุฒ ุชูุธูุงุช ุขู ุฑุง ุชุบุฑ ุฏุงุฏ

```

## 10.4. ๐ฑ๏ธSecurityLevelMode

* ุงู ูฺฺฏ ุชูุณุท ูพุงุฑุงูุชุฑ security ููุฌูุฏ ุฏุฑ ุจุฎุด global ุชูุธู ูโุดูุฏ ฺฉู ูุญูู authenticate ูููุฏู ฺฉูุงูุชโูุง ุฑุง ุชุนู ูโููุงุฏ ฺฉู ุดุงูู ููุงุฑุฏ ุฒุฑ ูโุดูุฏ
    * ads:ุจู ุณุฑูุฑ ุณุงูุจุง ุงุฌุงุฒู ูโุฏูุฏ ฺฉู ุจู ุงฺฉุชูุฏุงุฑฺฉุชูุฑ ูุชุตู ุดูุฏ ู authentication ุฑุง ุงุฒ ุทุฑู Kerberos ุงูุฌุงู ุฏูุฏ. ุฏุฑ ุงู ุญุงูุช ุงูุฒุงูุง ุจุงุฏ realm ู password server ุฏุฑ ุจุฎุด [global] ุชูุธู ุดููุฏ. ููุช ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ุจุดุชุฑ ุงุฒ ฒตฐ ุจุงุดุฏ ุชูุตู ูุดูุฏ
    * domain: ููุงููุฏ ุญุงูุช user ุงุณุช ุจุง ุงู ุชูุงูุช ฺฉู authentication ุชูุณุท ฺฉ domainController ุจุง ูพุฑูุชฺฉูโูุง ูุจู ุงุฒ ููุฏูุฒ NT ุตูุฑุช ูโฺฏุฑุฏ
    * server: ููุงููุฏ ุญุงูุช user ุงุณุช ุจุง ุงู ุชูุงูุช ฺฉู authentication ุชูุณุท ุณุฑูุฑ ุฑููุช(ุณุงูุจุง ุณุฑูุฑ ุฏฺฏุฑ ุง ฺฉ ููุฏูุฒ NT ุณุฑูุฑ)ุงูุฌุงู ุดูุฏ
    * share(ููุณูุฎ ุดุฏู ูฺฉุณ ุงุณุชูุงุฏู ููโฺฉูุฏ): ุจุฑุง ูุฑ ฺฉุฏุงู ุงุฒ share ูุง ูพุณูุฑุฏ ุฌุฏุงฺฏุงูู ูุฑุงุฑ ุฏูู
    * user: ูพุณูุฑุฏ ู ูุงู ฺฉุงุฑุจุฑ ุฏุฑ ูุงฺฏู ุจู ุณุงูุจุง ุณุฑูุฑ ู ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ูุงุฒ ูโุจุงุดุฏ ู ุงู ุงุทูุงุนุงุช ุฏุฑ ุฏุชุงุจุณ tdbsam ุฏุฑ ุณุฑูุฑ ููุฌูุฏ ุงุณุช. (ุฏุฑ ูุฑฺูโูุง ูุจู smbpasswd) ุฒูุงู ุชูุตู ูโุดูุฏ ฺฉู ฺฉุงุฑุจุฑุงู ุจุดุชุฑ ุงุฒ ฒตฐ ููุฑ ุจุงุดูุฏ

## 10.5. ๐ฑ๏ธUsernameMap

* ุงู ุงูฺฉุงู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุฏุฑ ฺฉ ุณุฑูุฑ ูููฺฉุณ ุจฺฏูู ุงฺฏุฑ ฺฉุงุฑุจุฑ ุจุง ูุงู x ุขูุฏ ุขู ุฑุง ูุนุงุฏู ฺฉุงุฑุจุฑ y ูุฑุงุฑ ุจุฏู

```shell
username map = </path/map-file-name such as [/etc/samba/username.map]> #ุจุฑุง ุงูฺฉุงุฑ ุจุงุฏ ุฎุท ุฒุฑ ุฑุง ุฏุฑ ุจุฎุด global ุงุฒ ูุงู smb.conf ูุฑุงุฑ ุฏูู ู ุขู ุฑุง ุจู ฺฉ ูุงู ูุตู ูฺฉูู
server_username = client_username #ุจู ูุฑูุช ุฒุฑ ุจุงุฏ ูุงู ุฑุง ฺฉุงูู ฺฉูู
cat /etc/samba/username.map #ูุญุชูุงุช ูุงู ุฑุง ฺฉุงูู ูฺฉูู
[...]
rblum = RichardBlum
cbresnahan = ChristineBresnahan
kryan = "Kevin E Ryan"
gschwartz = GarySchwartz
[...]
```

## 10.6. ๐๏ธ /etc/smb.conf

* ุฎุดโูุง ูุชูุงูุช ุฏุฑ smb.conf ูุงุจู ุชูุธู ุงุณุช ุงุฒ ุฌููู:
* [global]:ุงู ุจุฎุด ุงุฒ ูุงู smb.conf ุดุงูู ฺฉุงููฺฏโูุง ฺฉู ู ฺฉุงุฑุจุฑุฏ ุฏุฑ ุณุทุญ ุณุฑูุณ smbd ุงุณุช
    * [workgroup] : ุชุนุฑู workgroup ุง Samba group ฺฉู ุณุฑูุฑ ุจู ฺู ฺฏุฑูู ูุชุนูู ุงุณุช ู ุจุงุฏ ุฏุฑ ฺฉุงููพูุชุฑูุง ูุฑ ุฏุงููู ฺฉุณุงู ุจุงุดุฏ. ุงู ูุงู ฺฉ ูุงู FQDN ูุณุช
        * workgroup = FIREFLYGROUP
    * [server string]: ุชูุถุญุงุช ุงู ุณุฑูุฑ ุณุงูุจุง ู ูุงุจูุช ุงุณุชูุงุฏู ุงุฒ ุจุฑุฎ ูุชุบุฑูุง(ุนู variable substitutions) ูุฌูุฏ ุฏุงุฑุฏ
        * server string = Samba Server Version %v
    * [netbios name]: ุชุนุฑู ูุงู NetBIOS ุณุฑูุฑ samba. ุฏุฑ ฺฉ ุดุจฺฉู ูุฎุชูุท ุงุฒ ุณุณุชูโูุง ููุฏูุฒ ู ูููฺฉุณ(mixed network environment) ูุนูููุง ุงฺฏุฑ ุดุงูู ููุฏูุฒ ูุณุฎู ูุฏู ุจุงุดุฏ ูุงุฒู ุจู ุชุนุฑู ูโุจุงุดุฏ
    * [realm]: ุชุนู ูุญุฏูุฏู ูููุฑู Kerberos ฺฉู ุฏุฑ ุขู ูุญุฏูุฏู ุณุฑูุฑ ActiveDirectory ู SambaServer ุจุงูู ูุดุงุฑฺฉุช ุฏุงุฑูุฏ
    * ต-[interfaces]: ุณุฑูุณ ุฏุฑ ฺฉุฏุงู ฺฉุงุฑุช ุดุจฺฉู ุจุงุดุฏ. ุงฺฏุฑ ุชุนุฑู ูุดูุฏ ููู ฺฉุงุฑุชโูุง ุดุจฺฉู ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ูโฺฏุฑูุฏ
        * interfaces = enp0s*
    * [hosts allow]: ุณุณุชูโูุง ฺฉู ูโุชูุงููุฏ ุจู ุงู ุณุฑูุณ ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ. ูโุชูุงู IP (ุฌุฏุงุณุงุฒ ุจุง ูุฑฺฏูู ุง ุฎุท ูุงุตูู ุง ุชุจ)ุง subnet ุง hostname ุชุนู ฺฉุฑุฏ
        * hosts allow = 192.168.56.0/24
    * [hosts deny]: ุณุณุชูโูุง ฺฉู ููโุชูุงููุฏ ุจู ุงู ุณุฑูุณ ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ. ูโุชูุงู IP (ุฌุฏุงุณุงุฒ ุจุง ูุฑฺฏูู ุง ุฎุท ูุงุตูู ุง ุชุจ)ุง subnet ุง hostname ุชุนู ฺฉุฑุฏ
    * [disable netbios]: ูุงุจูุช ูพุดุชุจุงู ุงุฒ NetBIOS ุจูโุตูุฑุช ูพุดโูุฑุถ no ุชุนู ุดุฏู ุงุณุช. ุฏุฑ ุตูุฑุช ูุฒูู ู ุชูุงูุฏ ุขู ุฑุง ุฑู ุจูู ุชูุธู ฺฉูุฏ ุชุง ูพุดุชุจุงู NetBIOS ุบุฑูุนุงู ุดูุฏ ุชุงฑ-ุฏุฑุจุฑุฎ ุงุฒุชูุฒุนโูุง ุงุฒ ุฑุงู ุงูุฏุงุฒ daemon nmbd ุฌููฺฏุฑ ุดูุฏฒ-ูพููุงู ุดุฏู ูุงุจูุช browse ุณุฑูุฑ ุณุงูุจุง ุฏุฑ ุณุณุชูโูุง ููุฏูุฒ
    * [smb ports]: ุณุฑูุฑ ุณุงูุจุง ุฏุฑ ฺู ูพูุฑุชโูุง ุจุฑุง ุชุฑุงูฺฉ SMB ุงูุฏุงู ุจู listen ููุงุฏ
    * [wins support]: ูุงุจูุช ุงุณุชูุงุฏู ุงุฒ WINS ุง Windows Internet Name Service ุฏุฑ ุณุงูุจุง ุณุฑูุฑ ฺฉู ุจุตูุฑุช ูพุดโูุฑุถ no ุชูุธู ุดุฏู ุงุณุช
    * [log file]: ูุงุจูุช ุงุณุชูุงุฏู ุงุฒ ุจุฑุฎ ูุชุบุฑูุง(ุนู variable substitutions) ุฏุฑ ุขู ูุฌูุฏ ุฏุงุฑุฏ. ูุงุจูุช ุงุฌุงุฏ logFile ูุฌุฒุง ุจุฑุง ูุฑ sambaClient ูุฌูุฏ ุฏุงุฑุฏ
        * log file = /var/log/samba/log.%m
    * [log level]: ุณุทุญ ุงุฌุงุฏ ูุงฺฏ ุฑุง ุชุนู ูโฺฉูุฏ ฺฉู ุจุตูุฑุช ูพุดโูุฑุถ ุนุฏุฏ 0 ูโุจุงุดุฏ ุนู ุงุฌุงุฏ ูุงฺฏ ุฎุงููุด ุจุงุดุฏ. ุจุฑุง ุงุณุชูุงุฏู ูโุชูุงูุฏ ุงุฒุนุฏุฏ ฑ (ุฎูุงุตู) ุชุง ฑฐ(ููุตู) ุงุณุชูุงุฏู ููุงุฏ. ูุนูููุง ุขู ุฑุง ุฑู ฒ ุง ณ ุชูุธู ูโููุงูุฏ. ููฺู ูโุชูุงู ุจุฑุง ูุฑ ุณุทุญ ุฌุฏุงฺฏุงูู ุชุนู ูููุฏ ุนู smb:3 ุง auth:7
    * [max log size]: ููุฏุงุฑ ุญุฏุงฺฉุซุฑ ูุงฺฏ ุจุฑุญุณุจ ฺฉููุจุงุช ฺฉู ุจุตูุฑุช ูพุดโูุฑุถ ุนุฏุฏ ุตูุฑ ุจู ูุนู ุจุฏูู ูุญุฏูุฏุช ูุฑุงุฑ ุฏุงุฏู ุดุฏู ุงุณุช
        * max log size = 50
    * [security]: ุชุนู SecurityLevelMode ุจุฑุง ูุญูู authenticate ูููุฏู ฺฉูุงูุชโูุง ฺฉู ูโุชูุงูุฏ ุดุงูู ุงู ููุงุฑุฏ ุจุงุดุฏ: user ุง share(ููุณูุฎ ุดุฏู ูฺฉุณ ุงุณุชูุงุฏู ููโฺฉูุฏ) ุง server ุง domain ุง ads
        * security = user
    * [passdb backend]: ุชุนู ุฏุชุงุจุณ ุงุทูุงุนุงุชaccountูุง ฺฉู ุจุตูุฑุช ูพุดโูุฑุถ ููุฏุงุฑ ุขู ุฑู tdbsam ูุฑุงุฑ ุฏุงุฏ ุดุฏู ุงุณุช ูู ููุงุฏุฑ smbpasswd ุง ldapsam ูู ูโุชูุงูุฏ ุจุงุดุฏ
    * passdb backend = tdbsam
    * [smb encrypt]: ุงุณุชูุงุฏู ุงุฒ ุฑูุฒูฺฏุงุฑ ุฑุง ูุดุฎุต ูโฺฉูุฏ. ููุงุฏุฑ auto ุง mandatory ุง disabled ูโุชูุงูุฏ ุจุงุดุฏ. ูโุชูุงู ุขู ุฑุง ุจุฌุง ุงุณุชูุงุฏู ุฏุฑ ุจุฎุด [global] ุฏุฑ ุจุฎุด [share-name] ุงุณุชูุงุฏู ฺฉุฑุฏ
* [share-name]: ููุงุฑุฏ ฺฉู ูโุฎูุงูู ุฏุฑ ุณุงูุจุง ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดูุฏ ู ุดุงูู ูุงู ุง ูููุฏุฑ ุงุณุช ฺฉู ูโุฎูุงูู ุขู ุฑุง ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑู
    * ุนุจุงุฑุช ุฏุงุฎู ฺฉุฑูุดู ฺฉู ุฏุฑ ุงุจุชุฏุง ุชุนุฑู ูุฑ ูุณุฑ ูุฌูุฏ ุฏุงุฑุฏ ุฑุง ุจุงุฏ ุชุบุฑ ุฏูู
    * [comment]: ุชูุถุญุงุช ูพุฑุงููู ุฏุชุง ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ฺฉู ุจุฑุง ฺฉูุงูุช ุฏุฑ ุฒูุงู ฺฉู ูโุฎูุงูุฏ ุจุจูุฏ ฺู ฺุฒ ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ุงุณุช ูุงุจู ุฑูุช ุฎูุงูุฏ ุจูุฏ
    * [browseable]: (ูพุดูุฑุถ yes) ุฏุชุง ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ุฏุฑ ูุณุช ููุงุด ุฏุงุฏู ุดูุฏ ุง ุงูฺฉู ููุท ุจุงุฏ ูุงู ฺฉุงูู ุฑุง ุจุฏุงูุฏ ู ุงุฒ ุทุฑู ูุงู ฺฉุงูู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ
    * [valid users]: ุชุนู ฺฉุงุฑุจุฑุงู ุง ฺฏุฑููโูุง ูุฌุงุฒ ุจุฑุง ุฏุณุชุฑุณ ุจู ุณุฑูุณ. ุฏุฑุตูุฑุช ุนุฏู ุชุนู ุดุฏู ุงู ูพุงุฑุงูุชุฑ ููู ฺฉุงุฑุจุฑุงู ูุงุจูุช ุฏุณุชุฑุณ ุฎูุงููุฏ ุฏุงุดุช.ฺฉุงุฑุจุฑุงู ุง ฺฏุฑููโูุง ุจุง ูุฑฺฏูู ุฌุฏุง ูโุดููุฏ. ูุงู ฺฏุฑูู ุจุงุฏ ุจุง ฺฉุงุฑุงฺฉุชุฑ @ ุดุฑูุน ุดูุฏ
    * [invalid users]: ุชุนู ฺฉุงุฑุจุฑุงู ุง ฺฏุฑููโูุง ูุงูุฌุงุฒ ุจุฑุง ุฏุณุชุฑุณ ุจู ุณุฑูุณ. ุฏุฑุตูุฑุช ุนุฏู ุชุนู ุดุฏู ุงู ูพุงุฑุงูุชุฑ ููู ฺฉุงุฑุจุฑุงู ูุงุจูุช ุฏุณุชุฑุณ ุฎูุงููุฏ ุฏุงุดุช.ฺฉุงุฑุจุฑุงู ุง ฺฏุฑููโูุง ุจุง ูุฑฺฏูู ุฌุฏุง ูโุดููุฏ. ูุงู ฺฏุฑูู ุจุงุฏ ุจุง ฺฉุงุฑุงฺฉุชุฑ @ ุดุฑูุน ุดูุฏ
    * [path]: ูุญู ุฏูู ุฏุชุง ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู
    * [public]: (ูพุดูุฑุถ no ุนู ูุงุฒ ุจู ูพุณูุฑุฏ ูุฌูุฏ ุฏุงุฑุฏ). ุชุนู ูพุณูุฑุฏ ุจุฑุง ุฏุณุชุฑุณ ุจู ุฏุชุง ุจู ุงุดุชุฑุงฺฏ ฺฏุฐุงุดุชู ุดุฏู.
    * [guest ok]: ูุชุฑุงุฏู ููุฑุฏ [public] ุง [guest only] ูโุจุงุดุฏ
    * [guest only]: ูพุดูุฑุถnoุงุณุช ุนู ฺฉุงุฑุจุฑุงู ูููุงู ู ุฏฺฏุฑ ุงุชุตุงูโูุง ูุฌุงุฒ ูุณุชูุฏ.ุชุนู ูโฺฉูุฏ ฺฉู ุขุง ฺฉุงุฑุจุฑุงู ูููุงู (guest) ูุฌุงุฒ ุจู ุงุชุตุงู ูโุจุงุดูุฏ ุง ุฎุฑ. ูฺฉุชู: ุงฺฏุฑ ููุฑุฏ public = no ุจุงุดุฏ ูุจุงุฏ ุงุฒ guest only ุงุณุชูุงุฏู ููุงู.
    * [group]: ุชุนู ฺฉ ฺฏุฑูู ูพุดโูุฑุถ ุจุฑุง ุงุชุตุงู ฺฉุงุฑุจุฑุงู ฺฉู ูุนูููุง ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ุงูุฏุงู ูพุฑูฺูโุง ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ูโฺฏุฑุฏ.
    * [force group] : ูุชุฑุงุฏู ููุฑุฏ [group] ูโุจุงุดุฏฑฐ-[writable]: ุงุนุทุง ุฏุณุชุฑุณ write ุจู ูุญุชู ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ฺฉู ุจุตูุฑุช ูพุดโูุฑุถ ููุฏุงุฑ ุขู no ุงุณุช ุนู ูุฌูุฒ write ุจุตูุฑุช ูพุดโูุฑุถ ุฏุงุฏู ููโุดูุฏ
    * [read only]: ูุชุถุงุฏ ุงุนุธุง ูุฌูุฒ writable ูโุจุงุดุฏ
    * [write list]: ุชุนู ฺฉุงุฑุจุฑุงู ุง ฺฏุฑููโูุง ฺฉู ูุฌูุฒ read ู write ุฏุฑ ุฏุชุง ุจู ุงุดุชุฑุงฺฉโฺฏุฐุงุดุชู ุดุฏู ุฑุง ุฏุงุฑูุฏ. ุจุฏูู ุชูุฌู ุจู [writable]ุ ุจู ุงู ฺฉุงุฑุจุฑุงู ุงุฌุงุฒู ููุดุชู ุฏุงุฏู ู ุดูุฏ ู ุณูุชฺฉุณ ูุฒ ููุงููุฏ [valid users] ูโุจุงุดุฏ
* [homes]:
* [netlogin]: ุชูุธูุงุช ุถุฑูุฑ ุณุฑูุฑ ุณุงูุจุง ููุช ฺฉู ููุด domainController ุฏุงุฑุฏ (ูพุงุณุฎ ุจู ุฏุฑุฎูุงุณุชโูุง auth)[printers]: ุงุดุชุฑุงฺฉ ฺฏุฐุงุฑ ูพุฑูุชุฑ
* [profiles]: ุชูุธูุงุช roaming user profiles ฺฉู ฺฉ ฺฉุงุฑุจุฑ ุชูุธูุงุช ุฎูุฏ ุฑุง ูุงุฑุบ ุงุฒ ุงูฺฉู ุฏุฑ ฺฉุฌุง ูุงฺฏู ูฺฉูุฏ ุฏุฑุงูุช ููุงุฏ(ูุฑฺฉุฌุง ูุงฺฏู ููุงุฏ ุชูุธูุงุช ุฎูุฏ ุฑุง ุญุงุถุฑ ุฏุงุดุชู ุจุงุดุฏ
*

```shell
#============= Global Settings ===========================
#
[global]
workgroup = FIREFLYGROUP
server string = Samba Server Version %v
interfaces = enp0s*
hosts allow = 192.168.56.0/24
#
#----------------- Logging Options -----------------
#
log file = /var/log/samba/log.%m
max log size = 50
#
#------------- Standalone Server Options -------------
#
security = user
passdb backend = tdbsam
#
# [...]

#================== Share Definitions ====================
#
[ssharea]
comment = Server Share A
browseable = yes
path = /srv/ssharea
public = no
writable = yes
[...]
#
```

## 10.7. ๐ฑ๏ธsmbclient

ุงุชุตุงู ุง ููุงุด ูุณุช ูุงูโูุง ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ฺฉู ููุช ุจู ฺฉ ูููุฏุฑ ุงุฒ ุณุฑูุฑ ูุชุตู ูโุดูู ุขูฺฏุงู ุจุง ุฏุณุชูุฑุงุช ููุงููุฏ FTP ูโุชูุงูู ุจุง ูุงูโูุง ฺฉุงุฑฺฉูู

* [-L]:ูุณุช ฺฉุฑุฏู ุฏุงุฏูโูุง ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู

```shell
smbclient -L //localhost -U <user> #ูุดุงูุฏู ููุงุฑุฏ ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ุงุฒ ฺฉ ุณุฑูุฑ
smbclient //localhost/<PATH> -U <user> # ุงุชุตุงู ุจู ุฏุชุง ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู(share) ู ุงุฏุงูู ฺฉุงุฑ ุจุง ูุงูโูุง(ุฏุฑุงูุช ูุขูพููุฏ ู ุบุฑู) ููุงููุฏ ุฏุณุชูุฑ ุงู ุช ูพ ุฎูุงูุฏ ุจูุฏ
```

# 11. ๐ฐ๏ธSSH

## 11.1. ๐ฑ๏ธconcepts

* ูุฑูโุงูุฒุงุฑ termius ูุฑูโุงูุฒุงุฑ ssh ู scp ู sftp ู tunnel ุงุณุช ฺฉู ูู ูุณุฎู ููุจุงู ู ูู ูุณุฎู ูููฺฉุณ ุฏุงุฑุฏ ู ุชุฎุตุต ุฏุฑ ุจุญุซ ssh ฺฉุงุฑ ฺฉุฑุฏู ุงุณุช

```shell
ssh -t user@IP 'cd /usr/local/sbin; bash --login' # Login and execute command[such as cd]
scp [Server1Username]@[Server1_ip]:[Server1_Path] [Server2Username]@[Server2_ip]:[Server2_Path]
ssh -o StrictHostKeyChecking=no -l root ${peer}

```

## 11.2. ๐ฑ๏ธoptions

* -D: forward all traffic of service
* -f: fork
* -N: Non login
* -o: ุงุนูุงู ุชูุธูุงุช ุฏุงุฎู ูุงู ฺฉุงููฺฏ ุจุนููุงู ุขูพุดู ุฏุฑ ูุญุธู ุงุชุตุงู
    * ssh -o StrictHostKeyChecking=no user@10.10.10.10

## 11.3. ๐ฑ๏ธfiles

* sshd_config: ูุงู ุชูุธูุงุช ุณุฑูุณ ยซุงุณโุงุณโุงฺยป ุณุฑูุฑ(ุนู ุณุฑูุณ ยซุงุณโุงุณโุงฺยป ุณุฑูุฑ ฺู ุชูุธูุงุช ุฏุงุดุชู ุจุงุดุฏ)
* ssh_config: ูุงู ุชูุธูุงุช ฺฉูุงูุช ยซุงุณโุงุณโุงฺยป(ุนู ุฏุฑ ููฺฏุงู ยซุงุณโุงุณโุงฺยป ุจู ุณุฑูุฑูุง ูุชูุงูุช ฺู ุชูุธูุงุช ุฏุงุดุชู ุจุงุดุฏ)
* ~/.ssh/known_hosts: Contains a list of host keys for all hosts the user has logged into that are not already in the systemwide list of known host keys(fingerprint).
* ~/.ssh/authorized_keys: ุงฺฏุฑ ฺฉูุฏ ุนููู ฺฉุณ ุฑู ุฏุฑ ุงู ูุงู ูุฑุงุฑ ุจุฏูู ุฏฺฏุฑ ุงุฒ ุงู ูพุณูุฑุฏ ููโฺฏุฑุฏ ู ูุณุชููุง ูุงฺฏู ูโููุงุฏ
    * ูุฑ ุณุฑูุฑ ฺฉู ฺฉูุฏ ุนููู ุขู ุฏุฑ ูุงู authorized_keys ููุฌูุฏ ุจุงุดุฏ ูโุชูุงูุฏ ุจุฏูู ูุงุฑุฏ ฺฉุฑุฏู ูพุณูุฑุฏ ุฏุฑ ุณุฑูุฑ ูุงฺฏู ููุงุฏ
    * ุงู ูุงู ุชููุง ุจุงุฏ ุชูุณุท ูุงูฺฉ ุฎูุฏ ูุงูุช ุฎูุงูุฏู ู ููุดุชู ุฏุงุดุชู ุจุงุดุฏ ู ูู ุฏฺฏุฑุงู
* /home/user/.ssh/id_rsa : ุญุงู ฺฉูุฏ ุฎุตูุต ุงุณุช
* /home/user/.ssh/id_rsa.pub: ุญุงู ฺฉูุฏ ุนููู ุงุณุช

### 11.3.1. โ๏ธconfiguration

* PubkeyAuthentication: ุขุง ุงุญุฑุงุฒ ููุช ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏ ุนููู (Public Key Authentication) ูุฌุงุฒ ุงุณุช ุง ุฎุฑ
    * yes: ุงุญุฑุงุฒ ููุช ุจุง ฺฉูุฏ ุนููู ูุฌุงุฒ ู ุณุฑูุฑ ุจู ฺฉูุฏูุง ุนููู ฺฉูุงูุชโูุง ุชูุฌู ูโฺฉูุฏ
    * no: ุงุญุฑุงุฒ ููุช ุจุง ฺฉูุฏ ุนููู ุบุฑูุนุงู ูโุดูุฏ ู ฺฉูุงูุชโูุง ููโุชูุงููุฏ ุงุฒ ุฑูุด ุงุญุฑุงุฒ ููุช ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏ ุนููู ุจุฑุง ุงุญุฑุงุฒ ููุช ุงุณุชูุงุฏู ฺฉููุฏ
* ClientAliveCountMax: ุชุนู ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ูพุงูโูุง alive ุจุง ูุงุจูุช ุจุฏูู ูพุงุณุฎ ูุงูุฏู ุงุฒ ฺฉูุงูุช ู ุฏุฑ ุบุฑ ุงูุตูุฑุช ูุทุน ุงุชุตุงู
* ClientAliveInterval(ุจุฑุญุณุจ ุซุงูู):
    * ุชุนู ููุฏุงุฑ ุฒูุงู ุงุฑุณุงู ูพุงูalive ุจู ฺฉูุงูุช ู ุงฺฏุฑ ฺฉูุงูุช ุจู ุงู ูพุงูโูุง ูพุงุณุฎ ูุฏูุฏ ู ุฒูุงู ุชุนุฑู ุดุฏู (ฺฉู ุจุงClientAliveCountMaxุชุนู ูโุดูุฏ) ุจฺฏุฐุฑุฏุ ุณุฑูุฑ ุงุชุตุงู ุฑุง ูุทุน ูโฺฉูุฏ
    * ุงฺฏุฑ ClientAliveIntervalุจุฑุงุจุฑ60ุซุงูู ูClientAliveCountMaxุจุฑุงุจุฑ3ุจุงุดุฏุุณุฑูุฑ ูุฑถฐุซุงูู ฺฉ ุจุงุฑ ูพุงู "alive" ุงุฑุณุงู ูโฺฉูุฏ ู ุงฺฏุฑ ฺฉูุงูุช ุจู 3 ูพุงู ูุชูุงู ูพุงุณุฎ ูุฏูุฏุ ุณุฑูุฑ ุงุชุตุงู ุฑุง ูุทุน ุฎูุงูุฏ ฺฉุฑุฏ
* ListenAddress: ุงฺฏุฑ ฺูุฏ ฺฉุงุฑุช ุดุจฺฉู ุฏุงุดุชู ุจุงุดู ุจุง ุงู ููููู ุชุนู ูโฺฉูู ฺฉู ุงุฒ ฺฉุฏุงู ุข ูพ (ุชูุธู ุดุฏู ุฑู ฺฉุงุฑุช ุดุจฺฉู) ยซุงุณโุงุณโุงฺยป ูพุฐูุชู ุดูุฏ
* PasswordAuthentication[sshd_config]:
    * no : ููุท ฺฉุณุงู ฺฉู ฺฉูุฏ ุฏุงุฑูุฏ ูโุชูุงููุฏ ูุงฺฏู ููุงูุฏ
* AllowUsers: ฺฉุงุฑุจุฑุงู ูุฌุงุฒ ุจุฑุง ูุงฺฏู
* DenyUsers: ฺฉุงุฑุจุฑุงู ุบุฑ ูุฌุงุฒ ุจุฑุง ูุงฺฏู
* AllowGroups: ฺฏุฑููโูุง ูุฌุงุฒ ูุงฺฏู
* DenyGroups: ฺฏุฑููโูุง ุบุฑ ุบุฑูุฌุงุฒ ุจุฑุง ูุงฺฏู
* PermitRootLogin: ุขุง ูุฒุฑ ุฑูุช ุจุชูุงูุฏ ูุงฺฏู ููุงุฏ ุง ุฎุฑ
* X11Forwarding: ุขุง ุฑุงุจุท ฺฉุงุฑุจุฑ ุจุชูุงูุฏ ููุฑูุงุฑุฏ ุดูุฏ
* AllowTcpForwarding: ุณุฑูุฑ ุจุชูุงูุฏ ูพุฑูุชฺฉูโูุง ุชููู ุฑุง ุจูพุฐุฑุฏ
* LoginGraceTime: ุชุนู ูุฏุช ุฒูุงู ุจุฑุง ูุงฺฏู ู ุงุญุฑุงุฒ ููุช ฺฉ ฺฉุงุฑุจุฑ ุจู ุณุณุชู
    * defaults:2min
    * recommended:30s or 1m

## 11.4. ๐ฑ๏ธKEY

<div dir="rtl">

### 11.4.1. โ๏ธCreateKey(GolobalAndPrivate)

```shell
1-sudo apt-get install openssh-client
2-ssh-keygen -t rsa # ุงุฌุงุฏ ฺฉูุฏ ุนููู ู ุฎุตูุต ุจุฑุง ุงุชุตุงู ุจู ุณุฑูุฑูุงูุณ
  Enter file in which to save the key (/home/user/.ssh/id_rsa)
  Enter passphrase (empty for no passphrase) # can donot use passphrass
  Enter same passphrase again
3-check :
  Public Key: /home/user/.ssh/id_rsa.pub
  Private Key: /home/user/.ssh/id_rsa    
4-ssh-copy-id user@YourServerIPAddress
```

### 11.4.2. โ๏ธcopy publicKey

* ุฏุณุชูุฑ ุฒุฑ ุณุจุจ ุงูุฒูุฏู ูุญุชู ูุงู rsa_key.pub ุณุณุชู ุฎูุด ุฏุฑ ุงูุชูุง ูุงู authorized_keys ุณุฑูุฑ ููุตุฏ ูโุดูุฏ ู ูุงุฒ ุจู ฺฉูพ ุฏุณุช ูุฎูุงูุฏ ุจูุฏ
* ูฺฉุชู ููู: ุงฺฏุฑ ุณูฺ StrictHostKeyChecking=no ุฑุง ููุฑุงู -o โูุฑุงุฑ ุฏูุฏ ุงฺฏุฑ ฺฉูุฏ ูุฒุจุงู ูุงุดูุงุฎุชู ุจุงุดุฏุ SSH ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุขู ุฑุง ุจู ูุงู known_hosts ุงุถุงูู ูโฺฉูุฏ ู ุงุชุตุงู ุจุฑูุฑุงุฑ ูโุดูุฏ.

```shell
# ุฑูุด ุงูู
ssh-copy-id user@10.0.20.2 # [OR] ssh-copy-id  -i ~/.ssh/id_rsa.pub user@10.0.20.2
ssh -o StrictHostKeyChecking=no user@10.0.20.2 # [OR] ssh -o StrictHostKeyChecking=no -l user 10.0.20.2

# ุฑูุด ุฏูู
cat ~/.ssh/id_rsa.pub | ssh User@YourServerIPAddress "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
# [OR] scp /home/user/.ssh/id_rsa.pub user@YourServerIPAddress:/home/user/.ssh
```

</div>

## 11.5. ๐ฑ๏ธproxy

```shell
ssh -D <localPort> behrooz@<serverWithNet> #ุจูุด ููุตุฏ ููุงุด ุฏุงุฏู ูุดูุฏ
ssh -D -N <localPort> behrooz@<serverWithNet> # ุจุด ูุจุฏุง ูููุงุฑู ุจุงุฒ ููุงูุฏ ู ููุชูุงู ุฏุณุชูุฑ ูุงุฑุฏ ฺฉุฑุฏ
ssh -f -D -N <localPort> behrooz@<serverWithNet> #ุจูุด ูุจุฏุง ููฺูุงู ุจุงู ุงุณุช ู ุฏุณุชูุฑุงุช ุฏุฑุญุงูุช ููุฑฺฉ ุงุฌุฑุง ุฏุฑุขูุฏูโุงูุฏ
```

### 11.5.1. โ๏ธ[Trick1](https://serverfault.com/questions/456960/how-to-force-all-packets-go-through-ssh-tunnel)

* client network: 10.0.50.0/24
* remote network10.0.99.0/24
* Check sshd_config configuration option PermitTunnel controls whether the server supports this
* from 10.1.1.1 to 10.1.1.2, provided that the SSH server running on the gateway to the remote network, at 192.168.1.15, allows it.

```shell
#On the client:
ssh -f -w 0:1 192.168.1.15 true
ifconfig tun0 10.1.1.1 10.1.1.2 netmask 255.255.255.252
route add 10.0.99.0/24 10.1.1.2
#On the server:
ifconfig tun1 10.1.1.2 10.1.1.1 netmask 255.255.255.252
route add 10.0.50.0/24 10.1.1.1
```

### 11.5.2. โ๏ธTrick2-apt

ุฏุฑ ุณุณุชู ุฏุงุฑุง ุงูุชุฑูุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฒูุฏ

```shell
echo 'Acquire::http::proxy "socks5h://127.0.0.1:XXXX"; ' >> /etc/apt/apt.conf.d/behrooz
```

ุฏุฑ ุณุณุชู ุจุฏูู ุงูุชุฑูุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฒูุฏ

```shell
[ssh -f -N -D XXXX behrooz@systemWithInternet] # or [ssh -N -D XXXX behrooz@systemWithInternet]
```

#### 11.5.2.1. โ๏ธAlternative

ุฏุฑ ุณุณุชู ุจุฏูู ุงูุชุฑูุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฒูุฏ ู ุฏุฑ ุณุณุชู ุฏุงุฑุง ุงูุชุฑูุช ูุงุฒ ุจู ุฒุฏู ุฏุณุชูุฑ ูุณุช

```shell
[ssh -f -N -D XXXX behrooz@systemWithInternet] # or [ssh -N -D XXXX behrooz@systemWithInternet]
[apt --option Acquire::HTTP::Proxy="socks5h://127.0.0.1:XXXX" update
```

### 11.5.3. โ๏ธTrick3-yum

ุฏุฑ ุณุณุชู ุฏุงุฑุง ุงูุชุฑูุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฒูุฏ

```shell
echo "proxy=socks5h://localhost:xxxx" >> /etc/yum.conf
```

ุฏุฑ ุณุณุชู ุจุฏูู ุงูุชุฑูุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฒูุฏ

```shell
[ssh -f -N -D XXXX behrooz@systemWithInternet] # or [ssh -N -D XXXX behrooz@systemWithInternet]
```

## 11.6. ๐ฑ๏ธPortForward

### 11.6.1. โ๏ธPortForwarding-tunnel(Local)

* AllowTcpForwarding yes
* Gatewayports yes

![sshL.jpg](_srcFiles/Images/sshL.jpg "sshL.jpg")

### 11.6.2. โ๏ธPortForwarding-tunnel(Remote)

* AllowTcpForwarding yes
* Gatewayports yes

![sshR.jpg](_srcFiles/Images/sshR.jpg "sshR.jpg")



---

![ssh-portfwl1.jpg](_srcFiles/Images/ssh-portfwl1.jpg "ssh-portfwl1.jpg")
![ssh-portfwlr1.jpg](_srcFiles/Images/ssh-portfwlr1.jpg "ssh-portfwlr1.jpg")

# 11. ๐ฐ๏ธSNMP

* ุจุฑุง ุชูุธู ุงุทูุงุนุงุช community ุจุงุฏ ูุงู snmpd.conf ุงุตูุงุญ ุดูุฏ[ูุงู snmp.conf ุฑุง ุฏุณุชฺฉุงุฑ ูฺฉูุฏ]
*

```shell
# 12. on server 10.0.20.7 set this config:
apt install snmp snmpd
sudo apt install snmp-mibs-downloader
sudo download-mibs
sudo vim /etc/snmp/snmpd.conf
# 13. add: agentaddress  10.0.20.7:161
systemctl restart snmpd
```

```shell
net-snmp-config --version
snmpd -V
```

* rocommunity public default -V systemonly #ุณุจุจ ูุญุฏูุฏ ุดุฏู ุชุนุฏุงุฏ ุฑฺฉูุฑุฏูุง ูุงูุชูุฑ ุดุฏู ุงุฒ ุญุฏูุฏ ทูุฒุงุฑุชุง ุจู ณฐ ุนุฏุฏ ุงุฒ ููุงุฑุฏ ุฎู ุนููู

# 12. ๐ฐ๏ธNFS(NetworkFileSystem)

* ุงู ููุน ูุงู ุณุณุชู ูุฎุตูุต ูููฺฉุณ ูุณุช
* ูุฑฺูด: ูพุณูุฑุฏ ุฑุง ุณุงูพูุฑุช ูโฺฉูุฏ


1. ุฏุงุฑฺฉุชูุฑโูุง ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุฑ ุฏุฑ ุงู ูุงู ููุดุชู ูโุดูุฏ ฺฉู ูุฑูุช ุขู ุจู ุดฺฉู ุฒุฑ ุงุณุช
   ```shell
   cat /etc/export
   export_directory client-designation (directives)
   ```
    * export_directory: ูุณุฑ ุจูโุงุดุชุฑุงฺฉโฺฏุฐุงุฑ
    * client-designation: ฺฉุงุฑุจุฑุงู
    * directives: ุชูุธูุงุช ูุซูุง write ุง read
2. ููู daemonูุง ุณุฑูุณ NFS ฺฉ ูุงู alias ุฏฺฏุฑ ุฏุงุฑูุฏ ฺฉู ูุจู ุงุฒ ูุงู ูุฑ ูุณูุช rpc ุดุฑูุน ูโุดูุฏ ูุซูุง rpc.mountd ฺฉู ฺฉุงุฑูุง ูููุช ุฑุง ุงูุฌุงู ูโุฏูุฏ
3. ุงฺฏุฑ ุจุฎูุงูู ุฏุฑ etc/hosts.allow ฺฉ ุณุฑูุฑ ุฑุง ูููุงุฑู valid ฺฉูู
   ```shell
   vi /etc/hosts.allow
   rpcbind: 192.168.56.101,192.168.56.106
   ```
4. ุจุฑุง ุงุณุชูุงุฏู ุงุฒ /etc/hosts.allow ู etc/hosts.deny ุงุจุชุฏุง ุจุงุฏ ุจุจูู ฺฉู ุณุฑูุณ rpcbindุงุฒ ูุงฺูู libwrap ุงุณุชูุงุฏู ูโฺฉูุฏ ุง ุฎุฑ
   ```shell
   ldd /sbin/rpcbind | grep libwrap
   libwrap.so.0 => /lib64/libwrap.so.
   ```

* ุณูุช ุณุฑูุฑ
    1. `systemctl start nfs rpcbind`
    2. `mkdir /srv/nfs_share_temp`
    3. `echo "Hello World" >> /srv/nfs_share_temp/file.dat`
    4. `exportfs 192.168.56.101:/srv/nfs_share_temp` #ุงุฌุงุฏ ฺฉ ุงุดุชุฑุงฺฉ ุฌุฏุฏ
    5. `showmount -e` ููุงุด ูุณุช export ุดุฏู
       ```shell
       Export list for localhost.localdomain:
       /srv/nfs_share_temp 192.168.56.101
       ```
    6. -ููุงุด ูุณุช export ุดุฏู ู ููุงุจุน ุงุดุชุฑุงฺฉ ุจุฑุง ฺฉ ุขโูพ ุฎุงุต
       ```shell
       showmount -e 127.0.0.1
       Export list for 127.0.0.1:
       /srv/nfs_share_temp 192.168.56.101
       ```
    7. ููุงุด ูุณุช export ุดุฏู ุจุง ุชูุถุญุงุช ุงุถุงู
       ```shell
       exportfs -v
       /srv/nfs_share_temp 192.168.56.101(ro,wdelay,root_squash,no_subtree_check,sec=sys,ro,secure,root_squash,no_all_squash)
       ```
    8. `cat /var/lib/nfs/etab`
    9. ฺฉูุงูุชโูุง ฺฉู ุจู ุตูุฑุช ุฑููุช ุจู ุณุฑูุฑ ูุตู ุดุฏูโุงูุฏ
        * `cat /var/lib/nfs/rmtab`
    10. ุงุฒ ุงุดุชุฑุงฺฉ ุฎุงุฑุฌ ฺฉุฑุฏู ฺฉ ููุจุน ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ุฏุฑ ุณุฑูุฑ
        * `exportfs -u 192.168.56.101:/srv/nfs_share_temp`
* ุณูุช ฺฉูุงูุช
    1. `mkdir /home/christine/NFSTemp`
    2. `showmount -e <ClientIP>`
        * ฺู ุฏุงุฑฺฉุชูุฑโูุง ุจุฑุง ุขโูพ ฺฉูุงูุช ุฏุณุชุฑุณ ุงุณุช(exportList ุจุฑุง ฺฉ ุขโูพ ุฎุงุต)
    3. `sudo mount.nfs -o vers=3 192.168.56.102:/srv/nfs_share_temp NFSTemp`
        * ุงุฌุจุงุฑ ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ูุฑฺูณ
    4. `sudo umount.nfs NFSTemp`
        * ุจุง ุฒุฏู ุงู ุฏุณุชูุฑ ุฏุฑฺฉูุงูุช ููุจุน ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ุณุฑูุฑ ุงุฒ ูููุช(ุฏุฑ ุณุณุชู ฺฉูุงูุช) ุฎุงุฑุฌ ูโุดูุฏ

## 12.1. ๐ฑ๏ธDebian8

```shell
1- sudo apt-get install nfs-kernel-server nfs-common (server & client)
2- sudo vim /etc/exports (server)
# 14. add :
/mnt/share <ip client>(rw,sync,no_subtree_check,no_root_squash)

3- sudo exportfs -ra (server)
4- sudo /etc/init.d/nfs-kernel-server restart (server)
5- sudo ufw allow from <ip client> to any port nfs (server)
6- sudo ufw allow from <ip server> to any port nfs (client)
7- sudo showmount -e <ip server> (client)
8- sudo mkdir /mnt/share (client)
9- sudo chown user:user /mnt/share (client)
10- sudo vim /etc/fstab (client)

# 15. add:
<ip server>:/mnt/share   /mnt/share      nfs     defaults        0       0

11- sudo /etc/init.d/nfs-common restart (client)
12- sudo /etc/init.d/nfs-kernel-server restart (client)
13- sudo mount -a
14- df -h
```

* ุจุฑุฎ ุงุฒ ุชูุธูุงุช ุจุฎุด ุฏูู ุฏุงุฑฺฉุชูุฑโูุง ูุงู export ููุฌูุฏ ุฏุฑ etc ุชุญุช ุนูุงูู ุฒุฑ ูโุชูุงููุฏ ุจุงุดูุฏ
    * [Single Host]: ฺฉ ุขโูพ ุง FQDN ุง Hostname
    * [Netgroups]: ูุงู ฺฉ ฺฏุฑูู ูุซู group_name@
    * [Multiple systems]: ูุฏู ูุง wildcard ูุธุฑ * ุง ? ูุซูุง ูุฑ ฺฉุณ ุงุฒ itsee.ir ุจุงุฏ ุจุชูุงูุฏ itsee.ir*
    * [IP networks]
* ุฏุณุชูุฑุงุช ฺฉู ุฏุฑ ุณุฑูุณ NFS ุจู ฺฉุงุฑ ูโุขูุฏ
    * [exportfs]: ูุฏุฑุช ู ููุงุด ุงุทูุงุนุงุช ููุงุจุน ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู ู ูุชูุงูุฏ ุชูุณุท ุฏุณุชูุฑ ฺฉ ููุจุน ุฌุฏุฏ ุจู ูุงู export ุงุถุงูู ููุงุฏ ุชุง ููุจุน ุงุดุชุฑุงฺฉ ุฌุฏุฏ ุงุฌุงุฏ ุดูุฏ.[ุณูฺa: ุชูุงู ฺฉุงููฺฏโูุง ุงุดุชุฑุงฺฉ ุฑุง ุจู ูุงู etc/export ูุฑุงุฑ ูโุฏูุฏ] ู [ุณูฺi: ูุงุฏุฏู ฺฏุฑูุชู ูุงู ู ุชูุธูุงุช ููุฌูุฏ ุฏุฑ etc/export ู ุงุณุชูุงุฏู ุงุฒ ุขูพุดูโูุง commandLine ุจุฑุง ููุงุจุน ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดุฏู] ู [ุณูฺ: ] ู [ุณูฺr: ุนู reExport ฺฉุฑุฏู ู ูุฌุฏุฏ ุณุงุฎุชู ฺฉุงููฺฏโูุง ูุงู etc/export ุจุฑุญุณุจ ูุงูetc/lib/nfs/xtab ุฏุฑ ุฒูุงู ฺฉู ูุงู export ุฑุง ุฎุฑุงุจ ฺฉุงุฑ ฺฉุฑุฏู ุจุงุดู ]
    * [mount.nfs]: ุฒูุงู mount ฺฉุฑุฏู ูโุชูุงูู ุงุฒ ุงู ุฏุณุชูุฑ ุจุฌุง ุฏุณุชูุฑ mount ุฎุงู ุงุณุชูุงุฏู ููุงู
    * [umount.nfs]: ุฒูุงู umount ฺฉุฑุฏู ูโุชูุงูู ุงุฒ ุงู ุฏุณุชูุฑ ุจุฌุง ุฏุณุชูุฑ umount ุฎุงู ุงุณุชูุงุฏู ููุงู
    * [mountstats]: ุงุฒ ูุงู /proc/self/mountstats ุจู ุงุฑุงุฆู ุขูุงุฑ ฺฉู ูโูพุฑุฏุงุฒุฏ
    * [nfsiostat]: ุงุฒ ูุงู /proc/self/mountstats ุจู ุงุฑุงุฆู ุขูุงุฑ IO ูโูพุฑุฏุงุฒุฏ
    * [nfsstat]: ุชูุณุท ูุงูโูุง /proc/net/ ู rpc/nfsd ู /proc/net/rpc/nfs ู /proc/mounts ฺฏุฒุงุฑุด ุงุฒ ุนููฺฉุฑุฏ ุณุฑูุฑ ู ฺฉูุงูุช โูุง NFS ุงุฑุงุฆู ูโุฏูุฏ
    * [rpcinfo]: ุงุทูุงุนุงุช RemoteProcedureCall ุณุฑูุณ
    * [showmount]: ููุงุด ููุงุฑุฏ ูููุช ุดุฏู ุงุฒ nfs ฺฉู ู ุชูุงูุฏ ุจุตูุฑุช ุฑููุช ุงุณุชูุงุฏู ุดูุฏ
* ุจุฑุญ ุงุฒ ุชูุธูุงุช ุจุฎุด ุณูู ุฏุงุฑฺฉุชูุฑโูุง ูุงู export ููุฌูุฏ ุฏุฑ etc ุชุญุช ุนูุงูู ุฒุฑ ูโุชูุงููุฏ ุจุงุดูุฏ
    * [ro]: ููุท ุฎูุงูุฏู
    * [rw]: ูู ุฎูุงูุฏู ู ูู ููุดุชู
    * [async]: ุจุฑุฑุณ ูุดูุฏ ฺฉู ุขุง ุฏุชุง ฺฉุด ุฏุฑ ุฏุณฺฉ ููุดุชู ุดุฏู ุงุณุช ุง ุฎุฑ
    * [sync]: ุฏุฑูุฑุจุงุฑ ููุดุชู ุงูู ุจุงูุฑ ุฏุฑ ุฏุณฺฉ ููุดุชู ุดูุฏ ู ูพุณ ุงุฒ ููุดุชู ุดุฏู ุจู ุณุฑุงุบ ููุดุชู ุดุฏู ุจุนุฏ ุจุฑูู
    * [all_squash]: ููู ฺฉูุงูุชโูุง ุจุง ูุฑ ูุฒุฑ ฺฉู ุจู ุณุฑูุฑ nfs ูุตู ุดูุฏุ ุจุง ุฏุณุชุฑุณ ุณุทุญ anonymous ุง nfsnobody ูุตู ุดููุฏ .
    * [no_root_squash]: ุงฺฏุฑ ฺฉ ฺฉูุงูุช ุจุง username ุฑูุช ุจู ุณุฑูุฑ nfs ูุตู ุดูุฏ ุฏุณุชุฑุณ ุจู nfs Export ุจุง ุณุทุญ ุฏุณุชุฑุณ superUser ุฏุงุดุชู ุจุงุดุฏ
    * [root_squash]: ูุฒุฑ ุฑูุช ูุฑฺฉูุงูุช ุงฺฏุฑ ุจู ุณุฑูุฑ nfs ูุตู ุดูุฏุ ุจุง ุฏุณุชุฑุณ ุณุทุญ anonymous ุง nfsnobody ูุตู ุดููุฏ .
    * [anongid]: ุงุฎุชุตุงุต ฺฉ GID ุจู ููู ฺฏุฑููโูุง ฺฉูุงูุชโูุง anonymous ู ุฒูุงู ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ุจุฎูุงูู ููู ฺฉูุงูุชโูุง ุชุญุช ุนููุงู ฺฉ ฺฏุฑูู ุดูุงุณุง ุดูุฏ
    * [anonuid]: ุงุฎุชุตุงุต ฺฉ UID ุจู ููู ฺฉุงุฑุจุฑุงู anonymous ู ุฒูุงู ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ุจุฎูุงูู ููู ฺฉูุงูุชโูุง ุชุญุช ุนููุงู ฺฉ ฺฏุฑูู ุดูุงุณุง ุดูุฏ

# 8. ๐ฐ๏ธ[NTP(Network Time Protocol)](https://docs.redhat.com/En/Documentation/Red_Hat_Enterprise_Linux/7/Html/System_Administrators_Guide/Ch-Configuring_Ntp_Using_Ntpd#S2-Ntpd_Useful-Websites)

* UTC(Coordinated Universal Time): ุฒูุงูโุฌูุงูโููุงููฺฏ
* TSC(Time Stamp Counter) ฺฉ ุฑุฌุณุชุฑ ถดุจุช ฺฉู ุงุฒ ูุณู ูพูุชูู ุจู ุจุนุฏ ุฏุฑููู ยซุณโูพโูโยปูุง ูุณู ยซุงฺฉุณโธถยป ูุฑุงุฑ ุฏุงุฏู ุดุฏู ุงุณุช. ุดูุงุฑุด ุชุนุฏุงุฏ ุณฺฉู ูพุฑุฏุงุฒูุฏู ุฑุง ูฺฏูุฏุงุฑโูฺฉูุฏ
* DTS: Daylight Saving Time #ุณุงุนุช ุชุงุจุณุชุงู
    * File `/etc/localtime` is a copy or symlink to, a zone information file from  `/usr/share/zoneinfo/Asia/Tehran`
    * `cp /usr/share/zoneinfo/Asia/Tehran /etc/localtime`
* GMT(Greenwich Mean Time): ููุทูู ุตูุฑ ุฒูุงู ฺฉู ุณุงุนุช ุตูุฑ ุฑุง ูุดุงู ูโุฏูุฏฺฉู ุชุญุช ุนููุงู ฺฏุฑููฺ ุดูุงุฎุชู ุดุฏู ุงุณุช
* RTC(RealTimeClock or Hardware Clock)
    * stores year,month,day,hour,minute,second. not able to store the UTC or DST or localTime
    * ยซhwclockยป command is tool for manage the RTC
    * in opration system RTC may be in localtime or in UTC, as specified by the 3rd line of ยซ/etc/adjtimeยป --> [LOCAL] or [UTC]
      ```shell
      cat /etc/adjtime:
      0.000000 1711454945 0.000000
      1711454945
      UTC
      ```


* ุงู ุช ูพ ุฏุฑ ูพูุฑุช ฑฒณ ุชุญุช ูพุฑูุชฺฉู udp ฺฉุงุฑ ูฺฉูุฏ
* ููฺฏุงู ฺฉู ุจุฑูุงูู dhclient ูุณุช ุณุฑูุฑูุง NTP ุฑุง ุงุฒ DHCP ูโฺฏุฑุฏ ุจุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ูุงู ntp.conf ูุฑุงุฑ ูุฏูุฏ. ุจุฑุง ุฌููฺฏุฑ ุงุฒุงู ููุถูุน ุนุจุงุฑุช PEERNTP=no ุฑุง ุฏุฑ ูุงู /etc/sysconfig/network ูุฑุงุฑ ุฏูุฏ
* Stratum: ุณุฑูุฑูุง ยซุงูโุชโูพยป ุจุฑุงุณุงุณ ูุงุตูู ููฺฏุงูโุณุงุฒ ุขููุง ุจุง ุณุงุนุชโูุง ุงุชู ฺฉู ููุจุน ุณุฑูุฑูุง ยซุงูโุชโูพยป ูุณุชูุฏ ุฏุฑ ฑต ูุงู ุทุจููโุจูุฏ ูโุดููุฏ
    * ูุงูโุจูุฏ: ูุฑฺู ุงู ุนุฏุฏ ฺฉูุชุฑ ุจุงุดุฏ ุขู ุณุฑูุฑ ููุฑุฏ ุงุนุชูุงุฏุชุฑ ุงุณุช.
        * Stratum0: ุดูุงุฑุดโฺฏุฑ ูุฎุชุต ุณุงุนุชโูุง ุงุชู ฺฉู ูฺ ุจุณุชูโุง ุฏุฑ ุงูุชุฑูุช ุจุง ุดูุงุฑุดฺฏุฑ ุตูุฑ ุงุฑุณุงู ููโุดูุฏ.
            * ุณฺฏูุงู ุขู ุชูุณุท gps ุง ุณฺฏูุงู ุฑุงุฏู ุง ฺฏุฑูุฏู ููุจุงู ููุชุดุฑ ูโุดูุฏ. ุฏุฑุงูุช ุขู ูุงุฒ ุจู ุฏุณุชฺฏุงู ุงุฎุชุตุงุต ุฏุงุฑุฏ
        * Stratum1: ุดูุงุฑุดฺฏุฑ ุงููู ูุงูโ ฺฉู ูุฎุตูุต ุณุฑูุฑูุง ยซุงูโุชโูพยป ูุฑุชุจุท ุจุง ุณุงุนุชโูุง ุงุชู ุงุณุช
            * ูุฑ ฺฉุงููพูุชุฑ ฺฉู ุจู ุณุงุนุช ยซุฑุงุฏูยป ุง ุณุงุนุช ยซุฌโูพโุงุณยป ุง ุณุงุนุช ยซุงุชูยป ูุฌูุฒ ุจุงุดุฏ
        * Stratum2: ูุฑ ุณุณุชู ฺฉู ุงุฒ Stratum1 ุฏุชุง ฺฏุฑูุชู ุจุงุดุฏ
        * Stratum3: ูุฑ ุณุณุชู ฺฉู ุงุฒ Stratum2 ุฏุชุง ฺฏุฑูุชู ุจุงุดุฏ
        * ...
        * Stratum15: ูุฑ ุณุณุชู ฺฉู ุงุฒ Stratum14 ุฏุชุง ฺฏุฑูุชู ุจุงุดุฏ ู ูพุงู ุชุฑู ุณุทุญ ูุงูโุจูุฏ ุงุณุช.
        * Stratum16: ฺฉ ุงุตุทูุงุญ ุฑุงุฌ ุงุณุช ุจู ูุนู ุงู ฺฉู ุณุฑูุฑ ููโุงฺฉููู ุจุง ฺฉ ุณุฑูุฑ ููุฑุฏ ุงุนุชูุงุฏ ููฺฏุงู ุณุงุฒ ูุดุฏู ุงุณุช
* Drift File(ูุงู ุงูุญุฑุงูโููุฏุงุฑ): ุฐุฎุฑู ุชูุงูุช ูุฑฺฉุงูุณ ยซุณุงุนุช ุณุณุชูยป ู ยซููุฑุฏ ูุงุฒ ุจุฑุง ููุงููฺฏ ุจุง UTCยป
    * ุงุณุชูุงุฏู ุงุฒุงู ูุงู ุฒูุงู ููุฑุฏ ูุงุฒ ุจุฑุง ุฑุณุฏู ุจู ุฒูุงู ูพุงุฏุงุฑ ุฑุง ฺฉุงูุด ูโุฏูุฏ
    * ููฺฏุงู ุฑูุดูโุดุฏู ุณุณุชู ุฏุฑ ุตูุฑุช ูุฌูุฏ ููุฏุงุฑ ูุบุงุฑุชุ ุงุฒ ูุงู ุฎูุงูุฏู ู ูุญุงุณุจู ูโุดูุฏ ู ูุฑ ฺฉโุณุงุนุช ฺฉุจุงุฑ ุชูุณุท ุณุฑูุณ ุนุฏุฏ ุขู ุฏุฑ ูุงู ุจุฑูุฒุฑุณุงู ูโุดูุฏ
* ุณุฑูุณ ntpdate(ููุณูุฎ ุดุฏู): ูุฏู ุงุฒ ุงู ุณุฑูุณ ุชูุธู ุณุงุนุช ููฺฏุงู ุจูุช ุดุฏู ุณุณุชู ุงุณุช ุชุง ุฏฺฏุฑ ุจุฑูุงููโูุง ุจุง ุณุงุนุช ุตุญุญ ฺฉุงุฑ ฺฉููุฏ
* ูููุงุฑู ุฏุฑ ูุธุฑ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุฑูุด ฺฉูุงูุช ุณุฑูุฑ ุฏูุช ุจุงูุงุชุฑ ุงุฒ ุญุงูุช broadCast ุฏุงุฑุฏ
    * ุฏุฑ ุญุงูุช broadCast ฺฉูุงูุช ูู ุฏุงูุฏ ฺู ูุฏุช ฺฉ ุจุณุชู ูุจู ุงุฒ ุฏุฑุงูุช ุจุณุชู ุฏุฑ ุดุจฺฉู ุฏุฑ ุญุงู ุญุฑฺฉุช ุจูุฏู ุงุณุชุ ุจูุงุจุฑุงู ุชุฃุฎุฑ ุงูุชุดุงุฑ ุฑุง ูู ุชูุงู ุจู ุทูุฑ ูุงุจู ุงุนุชูุงุฏ ุฌุจุฑุงู ฺฉุฑุฏ.
* ูฺฉุชูโููู: ุชุบุฑ ุฏุฑ ุชูุธูุงุช ุณุฑูุณ ยซNTPยป ุณุจุจ ุจุฑูุฒุฑุณุงู ูุญุธูโุง ุฏุณุชูุฑ ููู ููโฺฏุฑุฏุฏ ูพุณ ุจุงุฏ ุชูุณุท ุฏุณุชูุฑ ุฒุฑ ุณุฑูุณ ุฑุง ุฑุณุช ููุงุฏ
    * `systemctl restart systemd-timedated.service`

```shell
/etc/sysconfig/network #ูุงู ุชูุธูุงุช ุดุจฺฉู
# 16. add [PEERNTP=no] for not change NTP config from dhclient program(with dhcp server data)
```

## 8.2. ๐๏ธ /etc/ntp.conf

* driftfile /var/lib/ntp/drift
* [pool | server]: ุนููฺฉุฑุฏ ูุดุงุจู ูู ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ูพูู ุชุฑุฌุญ ุจุฑ ุงุณุชูุงุฏู ุงุฒุฏุณุชูุฑ ุณุฑูุฑ ุฏุงุฑุฏ
    * server 0.pool.ntp.org iburst
        * ููุท ฺฉ ุจุงุฑ ุฏุฑ ููฺฏุงู ุฑุงู ุงูุฏุงุฒ ยซุฏโุงูโุงุณยป ูุนุงู ุดุฏู ู ยซุขโูพยป ุงุณุชุฎุฑุงุฌ ูโฺฏุฑุฏุฏ ู ููุดู ุงู ุขโูพ ููุงฺฉ ุฎูุงูุฏ ุจูุฏ
        * ุณุฑูุฑ ุบุฑูุงุจูโุฏุณุชุฑุณ ุดุฏู ูุฒ ููฺูุงู ููุงฺฉ ูุฑุงุฑ ูโฺฏุฑุฏ
* pool pool.ntp.org iburst
    * ุณุฑูุฑูุง ุฑุง ุงุฒ ููุจุน(ุงุณุชุฎุฑ) ูุดุฎุต ุดุฏู ุจู ุตูุฑุช ูพูุง ุฏุฑุงูุช ฺฉูุฏ
    * ููฺฏุงู ฺฉู ุณุฑูุฑูุง ุบุฑูุงุจู ุฏุณุชุฑุณ ู ุดููุฏุ ุฏูุฑ ุงูุฏุงุฎุชู ู ุดููุฏ ู ุณุฑูุฑ ุฌุฏุฏ ุจู ุณุฑุนุช ุงุถุงูู ูโุดูุฏ
    * ุชููุง ุฒูุงู ุฑุงูโุงูุฏุงุฒ ูุงู ุจู ุขโูพ ุชุจุฏู ููโุดูุฏ ู ุงู ุนููฺฉุฑุฏ ูุณุชูุฑ ุงูุฌุงู ูโฺฏุฑุฏ
* restrict IpAddress [mask Subnetmask] Options
    * restrict default nomodify notrap nopeer noquery
    * ุชูุถุญุงุช
        * nomodify: ุฌููฺฏุฑ ุงุฒ ุชุบุฑ ุฏุฑ ูพฺฉุฑุจูุฏ
        * notrap: prevents ntpdc control message protocol traps.
        * nopeer: prevents a peer association being formed.
        * noquery: prevents ntpq and ntpdc queries, but not time queries, from being answered
            * ฺฉูุฆุฑโูุง ุงู ุฏู ุฏุณุชูุฑ ูโุชูุงููุฏ ุณุจุจ ูฺฉ ู ุญููู ฺฏุฑุฏูุฏ ูพุณ ุญุชูุง ุงู ฺฏุฒูู ุฑุง ุฏุฑ ุชูุธูุงุช ูุฑุงุฑ ุฏูุฏ
        * ignore: All packets will be ignored, including ntpq and ntpdc queries.
        * kod: a "Kiss-o'-death" packet is to be sent to reduce unwanted queries.
        * lowpriotrap โ traps set by matching hosts to be low priority.
        * noserve โ deny all packets except ntpq and ntpdc queries.
        * notrust โ deny packets that are not cryptographically authenticated.
        * ntpport โ modify the match algorithm to only apply the restriction if the source port is the standard NTP UDP port 123.
        * version โ deny packets that do not match the current NTP version
        * limited โ do not respond to time service requests if the packet violates the rate limit default values or those specified by the discard command.
            * ntpq and ntpdc queries are not affected
    * ุชูุณุท ุฎุท ุจุงูุง ุชูุงู ูุงุณุชโูุง ุดุจฺฉู ุฏุงุฎู ูุญุฏูุฏ ูโุดููุฏ ู ุงฺฏุฑ ุจุฎูุงูู ูุงุณุช ุฑุง ูุฌุงุฒ ฺฉูู ุจุงุฏ ูุดุงุจู ุฒุฑ ุงูุฏุงู ููุงู
        * restrict 192.0.2.0 mask 255.255.255.0 nomodify notrap nopeer #ุชููุง ุงุฌุงุฒู ุจู ูุญุฏูุฏู ุขโูพ ุฎุงุต ุจุฑุง ุฏุฑุงูุช ุฒูุงู ู ุขูุงุฑโูุง ุฌุงูุจ
        * restrict 192.0.2.250 #ุงุฌุงุฒู ุฏุณุชุฑุณ ูุงูุญุฏูุฏ ฺฉ ูุงุณุช ุฎุงุต
        * restrict 192.0.2.250/32 #ุงุฌุงุฒู ุฏุณุชุฑุณ ูุงูุญุฏู ุจู ูุญุฏูุฏู ุข ูพ
* peer address:
    * ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุณุฑูุฑ ยซุงูโุชโูพยป ฺฉุณุงู ุงุฒ ูุญุงุธ ุงุณุชุฑุงุชูู
    * ุขุฏุฑุณ ุณุณุชู ุจุงุฏ ููุท ุจุนููุงู ุนุถู ุงุฒ ููุงู ูุงู ุงุณุชุฑุงุชูู ุดูุงุฎุชู ุดูุฏ
    * ููู ุณุฑูุฑูุง ููุชุง ุจุงุฏ ุญุฏุงูู ฺฉ ููุจุน ุฒูุงู ุฏุงุดุชู ุจุงุดูุฏ ฺฉู ุจุง ฺฉุฏฺฏุฑ ูุชูุงูุช ุจุงุดุฏ
    * ุขุฏุฑุณ ูโุชูุงูุฏ ุงุฒ ููุน ูุงู ยซุฏโุงููโุงูุณยป ุจุงุดุฏ
* server address
    * ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุณุฑูุฑ ยซุงูโุชโูพยป ุจุงูุงุฏุณุช ุงุฒ ูุญุงุธ ุงุณุชุฑุงุชูู
    * ุขุฏุฑุณ ุณุฑูุฑ ูุฑุฌุน ุงุฒ ุฑุงู ุฏูุฑ ุง ุณุงุนุช ูุฑุฌุน ูุญู ฺฉู ุจุณุชู ูุง ุจุงุฏ ุงุฒ ุขู ุฏุฑุงูุช ุดููุฏ
    * ุขุฏุฑุณ ูโุชูุงูุฏ ุงุฒ ููุน ูุงู ยซุฏโุงููโุงูุณยป ุจุงุดุฏ
* burst: ุจูุจูุฏ ฺฉูุช ูุชูุณุท ูุญุงุณุจุงุช ุฒูุงู ุงูุณุช
    * server IP burst
    * ุงุฒ ุงู ฺฏุฒูู ุฏุฑ ุณุฑูุฑูุง ยซุงูโุชโูพยป ุนููู ุงุณุชูุงุฏู ูฺฉูุฏ(ููุท ุจุฑูุงููโโูุง ฺฉุงุฑุจุฑุฏ ุฏุฑููโุณุงุฒูุงู)
    * ุฏุฑ ูุฑุจุงุฑ ุฑุฌูุน ุจู ุณุฑูุฑุ ููฺฏุงูฺฉู ุณุฑูุฑ ูพุงุณุฎ ูโุฏูุฏุ ุณุณุชู ุจู ุฌุง ฺฉ ุจุณุชู ูุนูููุ ุญุฏุงฺฉุซุฑ ูุดุช ุจุณุชู ุฑุง ุงุฑุณุงู ูโฺฉูุฏ
* iburst: ุจูุจูุฏ ุฒูุงู ุตุฑู ุดุฏู ุจุฑุง ููฺฏุงู ุณุงุฒ ุงููู
    * server IP iburst
    * ุงุฑุณุงู ธ ุจุณุชู ุจุฌุง ุงุฑุณุงู ฑ ุจุณุชู ูุนููู ุฏุฑ ููฺฏุงู ุบุฑูุงุจู ุฏุณุชุฑุณ ุจูุฏู ุณุฑูุฑ
    * ุจุตูุฑุช ูพุดโูุฑุถ ุฏุฑ ูุงู ุชูุธูุงุช ูุฌูุฏ ุฏุงุฑุฏ
* prefer : ุชุฑุฌุญ ุงููุช ุจุฑุง ฺฉ ุณุฑูุฑ ุฎุงุต ูุณุจุช ุจู ุฏฺฏุฑ ุณุฑูุฑูุง(
    * [server|peer] ip prefer #ุจู ุงูุชูุง ุงู ุฏู ุฏุณุชูุฑ ุจุงุฏ ุงุถุงูู ฺฏุฑุฏุฏ
* TTL: time to live
    * ttl value #ุชุนู ููุฏุงุฑ ูพุดโูุฑุถ ุจุฑุง ุงู ููููู
    * ูุนูููุง ููุฏุงุฑ ูพุดโูุฑุถ ุขู ุนุฏุฏฑฒท ูโุจุงุดุฏ
* logfile
    * logfile /var/log/ntp.log
    * logconfig =all #โูุงุตูู ูุจู ุนูุงูุช ูุณุงู ุญุชูุง ุจุงุฏ ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ

[URL](https://docs.redhat.com/En/Documentation/Red_Hat_Enterprise_Linux/7/Html/System_Administrators_Guide/Ch-Configuring_Ntp_Using_Ntpd#s1-Understanding_the_ntpd_Configuration_File)

![NTPserver-Stratum.jpg](./_srcFiles/Images/NTPserver-Stratum.jpg "NTPserver-Stratum.jpg")

## 8.3. ๐ฑ๏ธ Commands

### 8.3.1. โ๏ธ ntpstat

```shell
user@GeneralServer:~$ ntpstat
synchronised to NTP server (194.225.150.25) at stratum 3
   time correct to within 96 ms
   polling server every 64 s
```

### 8.3.2. โ๏ธ ntpd

````shell
/usr/sbin/ntpd -n -q -N -p 10.10.10.2
# 17. ุฏุฑ ุณุฑูุฑ ุงุณุชูุฑฺฉุณ ุจุง ุฏุณุชูุฑ ุฒุฑ ุงู ุณุฑูุฑ ุชุงู ุฑุง ุชูุธู ูฺฉุฑุฏ
````

### 8.3.3. โ๏ธ ntpdc

```shell
ntpdc -c kerninfo #check the synchronization of the software clock with the hardware clock
```

### 8.3.4. โ๏ธ ntpq

```shell
ntpq [-p | --peer]
ntpq -pn
ntpq -c as
ntpq -c rv
ntpq -c 'rv 0 offset'
ntpq -c "rv 0" URL
ntpq -c "rv &1" #ุนุฏุฏ ฺฉ ุงูุฌุง ุจู ุฑฺฉูุฑุฏ ุดูุงุฑู ุงูู ุฏุฑ ุฏุณุชูุฑ ยซุงููโุชโูพโฺฉูยป ุจุง ุณูฺ ยซูพยป ุงุดุงุฑู ุฏุงุฑุฏ 
ntpq -c "cv &1"
ntpq -c as
```

* `ntpq -c as`
    * '*' : ุณุณุชู ููุฑุฏ ูุธุฑ ุจุนููุงู ูุฑุฌุน ุณูฺฉ ูุฏ ูุธุฑ ูุฑุงุฑ ูโฺฏุฑุฏ
    * '+' : ุณุณุชู ููุฑุฏ ูุธุฑ ุฏุฑ ุชููุฑุงูุณ ุงุณุช ู ููุฏุงุฑ ุงุฑุงุฆู ุดุฏู ุขู ุฏุฑ ุงูฺฏูุฑุชู ุชุฑฺฉุจ ุงุณุชูุงุฏู ูโุดูุฏ. ุฏุฑุตูุฑุช ุงุฒุฏุณุช ุฏุงุฏู ุณุฑูุฑ ุงุตู ุงู ุณุฑูุฑ ููฺฉู ุงุณุช ุฌุงฺฏุฒู ฺฏุฑุฏุฏ
    * **Remote**: ุขุฏุฑุณ ุณุฑูุฑ
    * **Refid**: ุณุฑูุฑ ูุฐฺฉูุฑ ุงุฒ ฺฉุฌุง ุฏุชุง ุฎูุฏ ุฑุง ฺฉุณุจ ฺฉุฑุฏู ุงุณุช
        * ุจุฑุง ูุงู ุงุณุชุฑุงุชููฑ ูุนูููุง ยซุฌโูพโุงุณยป ุง ยซุฌโุงููโุงูุณโุงูุณยป ุงุณุช
        * ุจุฑุง ูุงูโูุง ุฏฺฏุฑ ุงุณุช ุขุฏุฑุณ ุณุฑูุฑ ูุฏ ูโุดูุฏ
    * **stratum**:  ูุงุตูู ููฺฏุงูโุณุงุฒ ุขููุง ุจุง ุณุงุนุชโูุง ุงุชู ฺฉู ููุจุน ุณุฑูุฑูุง ยซุงูโุชโูพยป ูุณุชูุฏ
        * Stratum0: ุดูุงุฑุดโฺฏุฑ ูุฎุชุต ุณุงุนุชโูุง ุงุชู ฺฉู ูฺ ุจุณุชูโุง ุฏุฑ ุงูุชุฑูุช ุจุง ุดูุงุฑุดฺฏุฑ ุตูุฑ ุงุฑุณุงู ููโุดูุฏ.
            * ุณฺฏูุงู ุขู ุชูุณุท gps ุง ุณฺฏูุงู ุฑุงุฏู ุง ฺฏุฑูุฏู ููุจุงู ููุชุดุฑ ูโุดูุฏ. ุฏุฑุงูุช ุขู ูุงุฒ ุจู ุฏุณุชฺฏุงู ุงุฎุชุตุงุต ุฏุงุฑุฏ
        * Stratum1: ุดูุงุฑุดฺฏุฑ ุงููู ูุงูโ ฺฉู ูุฎุตูุต ุณุฑูุฑูุง ยซุงูโุชโูพยป ูุฑุชุจุท ุจุง ุณุงุนุชโูุง ุงุชู ุงุณุช
            * ูุฑ ฺฉุงููพูุชุฑ ฺฉู ุจู ุณุงุนุช ยซุฑุงุฏูยป ุง ุณุงุนุช ยซุฌโูพโุงุณยป ุง ุณุงุนุช ยซุงุชูยป ูุฌูุฒ ุจุงุดุฏ
        * Stratum2: ูุฑ ุณุณุชู ฺฉู ุงุฒ Stratum1 ุฏุชุง ฺฏุฑูุชู ุจุงุดุฏ
        * Stratum3: ูุฑ ุณุณุชู ฺฉู ุงุฒ Stratum2 ุฏุชุง ฺฏุฑูุชู ุจุงุดุฏ
        * ...
        * Stratum15: ูุฑ ุณุณุชู ฺฉู ุงุฒ Stratum14 ุฏุชุง ฺฏุฑูุชู ุจุงุดุฏ ู ูพุงู ุชุฑู ุณุทุญ ูุงูโุจูุฏ ุงุณุช.
        * Stratum16: ฺฉ ุงุตุทูุงุญ ุฑุงุฌ ุงุณุช ุจู ูุนู ุงู ฺฉู ุณุฑูุฑ ููโุงฺฉููู ุจุง ฺฉ ุณุฑูุฑ ููุฑุฏ ุงุนุชูุงุฏ ููฺฏุงู ุณุงุฒ ูุดุฏู ุงุณุช
    * **Type**: ููุน ุฏุณุชุฑุณ ุจู ูุฑุฌุน
        * [local] or [unicast] or [multicast] or [broadcast]
        * ูุนูููุง ุฏุฑ ูุถุนุช ยซููฺฉุณุชยป ูโุจุงุดูุฏ
    * **When**: ุขุฎุฑู ุจุณุชู ุจุฑุญุณุจ ุซุงูู ุฏุฑ ฺู ุฒูุงู ุฑุณุฏู ุงุณุช
        * ููุช ููุฏุงุฑ ุจู ุนุฏุฏ ุณุชูู ยซูพููยป ุฑุณุฏ ุขูฺฏุงู ูุฌุฏุฏ ุงุฒ ุณุฑูุฑ ูพุฑุณุด ูโฺฉูุฏ
    * **Poll** โ ูุฑ ฺูุฏ ููุช ฺฉุจุงุฑ ุงุฒ ุณุฑูุฑ ุจุฑุง ุฒูุงู ููุฑุฏ ูุธุฑุ ูพุฑุณุฌู ู ุดูุฏ.
        * ุจู ุทูุฑ ูุนูููุ ุจู ถด ุซุงูู ุชุง 1024 ุซุงูู ุงุณุช
        * ููุฏุงุฑ ุงุฒ ุชูุงู ฒ ูโุจุงุดุฏ ู ุญุฏุงูู 16 ุซุงูู ุชุง ุญุฏุงฺฉุซุฑ 36 ุณุงุนุช
    * **Reach**: ูุฒุงู ููููุช ู ุดฺฉุณุช ุจุฑูุฑุงุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ ุฑุงู ุฏูุฑ ุฑุง ูุดุงู ู ุฏูุฏ
        * (ุงุฒ ุฑุงุณุช ุจู ฺูพ)ฺฉ ููุฏุงุฑ ูุดุช ุจุช ุดูุช ุจู ฺูพ
        * ุนู ุจุง ูุฑ ุจุงุฑ ููููุช ุง ุดฺฉุณุช ุนุฏุฏ ุจุนุฏ ุตูุฑ ุง ฺฉ ูุฑุงุฑ ุฏุงุฏู ุดูุฏ
        * ุจุนุฏ ุงุฒ ูุฑ ูพุฑุณุด ูููู ฑุ ณุ ทุ ฑทุ ณท, ทท, ฑทท, ณทท ุงูุฒุงุด ู ุงุจุฏ ุนุฏุฏ ณทท ุจุงูุงุชุฑู ููุฏุงุฑ ุงุณุช
            * ุงู ุงุนุฏุงุฏ ุฏุฑ ูุจูุง ุงูฺฉุชุงู ูโุจุงุดูุฏ
        * ABCDEFGH
            * A:ุงููู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
            * B:ุฏููู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
            * C:ุณููู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
            * D:ฺูุงุฑูู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
            * E:ูพูุฌูู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
            * F:ุดุดูู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
            * G:ููุชูู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
            * H:ูุดุชูู ูพุฑุณุด ฺฉู ูโุชูุงูุฏ ฺฉ(ูพุฑุณุด ูููู) ุง ุตูุฑ(ูพุฑุณุด ูุงูููู) ุจุงุดุฏ
        * 11011101
            * ุนู ูููุงุฑู ูพุฑุณุด ุงุฒ ุณุฑูุฑ ูููู ุจูุฏู ูฺฏุฑ ุฏุฑ ูพุฑุณุด ุณูู ูููุชู ฺฉู ุนุฏุฏ ุขู ุฏุฑ ุงฺฉุชุงู ูโุดูุฏ ณณต
    * **Delay**: ูุงูฺฏู ุชุงุฎุฑ ุจุณุชู ุจุฑุญุณุจ ููโุซุงูู
        * ุงู ูุงูฺฏู ุฒูุงู ูุงุฒู ุจุฑุง ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุฎูุงูุฏู ุจู ููุจุน ุฒูุงู ู ุฏุฑุงูุช ูพุงุณุฎ ุงุฒ ุขู ููุจุน ุงุณุช
        * RTT ููุงู ููููู ูุชูุงุธุฑ
    * **Offset**: ุณุงุนุช ุดูุง ฺูุฏุฑ ุงุฒ ุฒูุงู ฺฏุฒุงุฑุด ุดุฏูโุง ฺฉู ุณุฑูุฑ ุจู ุดูุง ุฏุงุฏู ุงุณุช ูุงุตูู ุฏุงุฑุฏ
        * ุจุฑุญุณุจ ููโุซุงูู ู ููุฏุงุฑ ุขู ูโุชูุงูุฏ ูุซุจุช ุง ููู ุจุงุดุฏ
    * **Jitter**: ูุงุฑุงูุณ ุจุณุชูโูุง ุฒูุงูโุจูุฏ ุณุฑูุฑ ฺฉู ุนุฏุฏ ฺฉูุชุฑ ูุดุงูโุฏููุฏู ุณุงุนุช ุจุง ฺฉูุช ุจุงูุงุชุฑ ุงุณุช
        * ุจุฑุญุณุจ ููโุซุงูู ู ูููุงุฑู ูุซุจุช
        * ุฑุดู ูุงูฺฏู ูุฌุฐูุฑ ุงูุญุฑุงู ุขูุณุชโูุง

## 8.4. ๐ฑ๏ธ Client Commands

### 8.4.1. โ๏ธ timedatectl

```shell
# 18. set-ntp
timedatectl set-ntp [False|NO|Off] or [True|On|Yes]

# 19. vim /etc/systemd/timesyncd.conf
sudo systemctl restart systemd-timesyncd.service
sudo systemctl restart systemd-timedated.service

timedatectl list-timezones
timedatectl list-timezones | grep Tehran
timedatectl set-timezone Asia/Tehran

timedatectl set-local-rtc boolean

# 20. set-time
timedatectl set-time HH:MM:SS -----> 23:26:00
timedatectl set-time YYYY-MM-DD----> 2017-06-02
timedatectl set-time "2017-06-02 23:26:00"

# 21. โ๏ธ ุจุฑุง ุซุจุช ุชุบุฑุงุช ุงุฒ ุงู ุฏุณุชูุฑ ุงุณุชูุงุฏู ููุงุฏ
sudo systemctl restart systemd-timedated.service 
```

### 8.4.2. โ๏ธ date

```shell
date --utc
date +%Y%m%d-%H:%M:%S.%N

date [--set|-s] HH:MM:SS
date [--set|-s] YYYY-MM-DD
date --set HH:MM:SS [--utc|-u]
# 22. ุฏุฑ ุฏุณุชูุฑ ยซุฏูุชยป ุจุตูุฑุช ูพุดโูุฑุถ ุณุงุนุช ุจุฑ ูุจูุง ูุญู ุชูุธู ูโุดูุฏ ูู ุงฺฏุฑ ุจุฎูุงูุฏ ุงู ุณุงุนุช ุฑุง ุจุฑ ูุจูุง ยซูโุชโุณยปุชูุธู ููุงุฏ ุงุฒ ุฏุณุชูุฑ ููู ุงุณุชูุงุฏู ููุงุฏ
date --set "2017-06-02 23:26:00"
date -u -d '2021-08-05 15:41:00' +%s โ echo $EPOCHREALTIME #ุฏุฑุงูุช ุงูพูุฎโุชุงู
date -u -d @1628178060 #ุชุจุฏู ุงูพูุฎโุชุงู ุจู ุฒูุงู ุงุณุชุงูุฏุงุฑุฏ

```

### 8.4.3. โ๏ธ hwclock

```shell
[hwclock]
hwclock --utc #ุชุนู ฺฉุฑุฏู ุฐุฎุฑู ุณุงุนุช ุจุฑ ูุจูุง ูุชโุณ
hwclock --set --date "21 Oct 2016 21:17" --utc
```

* `hwclock --systohc --utc` โ `timedatectl set-local-rtc false`
    * Sync ยซOS timeยป to ยซHardwareClockยป And keep the hardware clock in UTC

```shell
hwclock --hctosys --utc #Sync ยซHardwareClockยป to ยซOS timeยป And keep the hardware clock in UTC
hwclock --localtime #ุชุนู ุฐุฎุฑู ุณุงุนุช ุจุฑ ูุจูุง ุณุงุนุช ูุญู
hwclock --set --date "21 Oct 2016 21:17" --localtime
```

* `hwclock --systohc --localtime` โ `timedatectl set-local-rtc true`
    * Sync ยซOS timeยป to ยซHardwareClockยป And keep the hardware clock in local time

```shell
hwclock --hctosys --localtime #Sync ยซHardwareClockยป  to ยซOS timeยป And keep the hardware clock in local time
hwclock [ -s | --hctosys] #Synchronizing DateAndTime of HardwareClock to OS
hwclock [-w | --systohc] #Synchronizing DateAndTime of OS to HardwareClock
hwclock [ -r | --show] #Show Hardware time
```

* ูฺฉุชู: ุฏุณุชูุฑ `hwclock --utc` ู `hwclock --local` ุชุบุฑ ุฏุฑ ูุงู `etc/adjtime` ุงุฌุงุฏ ููโฺฉูุฏ

### 8.4.4. โ๏ธ Example

* ุขูุง ุงุญูุฏูพูุฑ ุฏุฑ NTPServer ุจู ุขุฏุฑุณ 10.0.20.2 ุฏุณุชูุฑุงุช ุฒุฑ ุฑุง ุฒุฏู ุจูุฏ ุชุง ุงู ุณุฑูุฑ ุจุฏูู ุฏุงุดุชู ุงูุชุฑูุช ุฏุฑ ุฏุณุชุฑุณ ุจุงุดุฏ ู ุณุงุนุช ุฑุง ุงุฒ ุฎูุฏุด ุจุฎูุงูุฏ

```shell
server 127.127.1.0 prefer
fudge  127.127.1.0 stratum 10
```

ฺฉู ุฏุฑ ุงู ุตูุฑุช ุฏุณุชูุฑ ุฒุฑ ุฎุฑูุฌ ุฒุฑ ุฑุง ุฎูุงูุฏ ุฏุงุดุช

```shell
user@GeneralServer:~$ ntpq -p
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
*LOCAL(0)        .LOCL.          10 l   29   64  377    0.000    0.000   0.000
```

# 13. ๐ฐ๏ธFTP

* ูุฎูู FileTransferProtocol ุงุณุช
* ุชูุตู ูโุดูุฏ ฺฉู ููุดู ftp ุฑุง ุฎุงููุด ฺฉูุฏ ู ููุช ูโุฎูุงูุฏ ุงุณุชูุงุฏู ููุงุฏ ุขู ุฑุง ุฑูุดู ููุงุฏ
* ุฑู ูพูุฑุช ฒฐ ุฏุณุชูุฑุงุช ุฑุง ฺฏูุด ูโุฏูุฏ
* ุฑู ูพูุฑุช ฒฑ ุฏุชุง ุฑุง ุงูุชูุงู ูุฏูุฏ
* ููุช ุฏุฑ ุดุจฺฉู nat ุงุณุชูุงุฏู ุดูุฏ ููโุชูุงูุฏ ุงุฒ ูพูุฑุช ฒฐ ุจู ููุตุฏ ูุตู ุดูุฏ ุจูุงุจุฑุงู ุญุงูุช active ู passive ุจูุฌูุฏ ุขูุฏ ฺฉู ููุช ุงุฒ nat ุงุณุชูุงุฏู ููุงู ุจุงุฏ ุงุฒ ูุถุนุช passive ุงุณุชูุงุฏู ุดูุฏ
* ุฏู ุงูโุชโูพ ุณุฑูุฑ ุงุตู ุฏุงุฑู ุจุง ูุงูโูุง vsftpd ู Pure-FTPd ฺฉู ูุนูููุง vsftpd ูุตุจ ูโุดูุฏ

![ftpactivemode.png](_srcFiles/Images/ftpactivemode.png "ุญุงูุช ุงฺฉุชู")
![ftppassivemode.png](_srcFiles/Images/ftppassivemode.png "ุญุงูุช ูพุณู")

# 14. ๐ฐ๏ธ Commands

## 14.1. ๐ฑ๏ธ ethtool

```shell
sudo ethtool enp5s0 # ุงุทูุงุนุงุช ูููโุงูุนุงุฏู ุฒุงุฏ ุจุงุจุช ฺฉุงุฑุช ุดุจฺฉู

```

## 14.2. ๐ฑ๏ธ host

```shell
host -la domain.local # ููุงุด ุชูุงู ุฑฺฉูุฑุฏูุง ฺฉ ุฏุงููู
host <name[google.com]>
```

## 14.3. ๐ฑ๏ธ hostname

* [-I] or [--all-ip-addresses] โ All IP addresses for the host

```shell
hostname -I # show all ip address
```

## 14.4. ๐ฑ๏ธ iwlist|iwconfig

wifi|wireless|ูุงโูุง

```shell
iwlist <nic> scan #ุจุฑุฑุณ ูุงุฑูุณโูุง ุงุทุฑุงู ุณุณุชู ฺฉู ุจุฎูุงูู ุจู ุขู ูุตู ุดูู
iwconfig wlp4s0 essid "<Name>" key s:<Pass> #ุงุชุตุงู ุจู ฺฉ ูุงุฑูุณ
```

## 14.5. ๐ฑ๏ธ ip

Usage: ip OPTIONS OBJECT COMMAND

**ูฺฉุชู:** ุจู ุฌูุช ุณูููุช ุงฺฏุฑ ุจุฎุด ุงุฒ ฺฉููู ุฏุณุชูุฑ ูฺฏุงุฑุด ุดูุฏ ุจู ููุฒููโุขู ุงุณุช ฺฉู ููู ฺฉููู ุจู ูฺฏุงุฑุด ุฏุฑุขูุฏู ุงุณุช

**OBJECTS**:

* address
    * ip a[|ad|add|addr|addre|addres|address] [s|sh|sho|show] [dev] eth0
    * ip a sh
    * ip ad sho
    * ip add s
    * ip -4 addre sho
* addrlabel
* amt
* fou
* help
* ila
* ioam
* l2tp
* link: network device
* macsec
* maddress: multicast address
* monitor: watch for netlink messages
* mptcp
* mroute
* mrule
* neigh
* neighbor
* neighbour
* netconf
* netns
* nexthop
* ntable
* ntbl
* route: routing table entry
* rule: rule in routing policy database
* sr
* stats: manage and show interface statistics
* tap
* tcp_metrics
* token
* tunnel: tunnel over IP
* tuntap
* vrf
* xfrm

**Options:**

* -c[olor]: ููุงุด ุฑูฺฏ ุฏุณุชูุฑุงุช
    * ip -c address show
* -d[etails]: ููุงุด ุฌุฒุงุช
    * ip -d address
* -s[tatistics]
    * ip -s link
* -4: ip version4
* -6: ip version6

* ip -s link #network statistics
* link
    * ip link set <NIC> up|down
    * ip link #show information for all interfaces
    * ip link show dev eth0 #Display information only for device eth0
    * ip link set eth0 promisc on #Enable promiscuous mode for eth0
    * ip link ls up #Only show running interfaces
    * ip -s link #Display interface statistics
    * ip -s link ls eth0 #get information about a particular network interface
* add
    * ip addr add x.x.x.x/Y dev <NIC> โ Add IP
* remove
    * ip addr del x.x.x.x/Y dev <NIC> โ del IP
    * ip link del <nic> down โ up/down NIC

### 14.5.1. โ๏ธ [Gateway|Routr] Commands

* show
    * ip route
    * ip route show #default gateway information
* add
    * ip route add default via 192.168.200.1/24 #assign a default gateway
* remove
    * ip route del 192.168.0.150/24 #Removing a static route

## 14.6. ๐ฑ๏ธ ifconfig

```shell
ifconfig eth0:0 xxx.xxx.xxx.xxx #set [Additional ip] or [VirtualIp]
ifconfig eth0 hw ether AA:BB:CC:DD:EE:FF #MacSpoofing or ุชุบุฑ ูฺฉ ุขุฏุฑุณ
```

## 14.7. ๐ฑ๏ธ lsof

### 14.7.1. โ๏ธ Concept

* COMMAND: The command name
* PID: Process ID (PID) of the process
* USER: Owner of the process
* FD: is the File Descriptor number of the file or
    * cwd: current working directory
    * rtd: root directory
    * txt: program text (code and data)
    * mem: memory-mapped file
    * Lnn: library references (AIX);
    * err: FD information error (see NAME column)
    * jld: jail directory (FreeBSD)
    * ltx: shared library text (code and data)
    * Mxx: hex memory-mapped type number xx
    * m86: DOS Merge mapped file
    * mmap: memory-mapped device
    * pd: parent directory
    * tr: kernel trace file (OpenBSD)
    * v86: VP/ix mapped file;
    * others:
        * r: for read access
        * w: for write access
        * u: for read and write access
* TYPE: Type of file descriptor[type of the node associated with the file]
    * DIR: Directory
    * REG: Regular file
    * CHR: Character special file.
    * FIFO: First In First Out
    * IPv4: IPv4 socket
    * IPv6: for an open IPv6 network file - even if its address is IPv4, mapped in an IPv6 address
    * inet: for an Internet domain socket
* DEVICE: Device number or, in the case of a block device, character or other
* SIZE/OFF: Dimension(ุจูุนุฏ) or size of the file or offset (the suffix 0t is the offset)
* NODE: Node description of the local file; this could be the number of the local file, TCP, UDP, or STR (stream)
* NAME: The name of the mount point where the file resides

### 14.7.2. โ๏ธ Switch

* [-i] โ List all network connecttion
    * tcp|udp:
        * lsof -i tcp
        * lsof -i udp
    * PORT
        * lsof -i :22 #open Ports on ssh
        * lsof -i :ssh
        * lsof -i TCP:22
        * lsof -i UDP:514
        * lsof -i tcp
    * PORT Range
        * lsof -i TCP:1-1024
    * 4|6 โ ipv4 or ipv6
        * lsof -i 4
        * lsof -i 6
    * IP
        * lsof -i @127.0.0.1
        * lsof -i @192.168.200.2
        * lsof -i tcp@127.0.0.1
        * lsof -i tcp@192.168.200.2
        * lsof -i udp@127.0.0.1
        * lsof -i udp@127.0.0.1
* [-u] All network connecttion List User Specific Opened Files
    * lsof -u behrooz
    * ^ : Exclude User with โ^โ Character โ ุนุฏู ููุงุด ฺฉ ูุฒุฑ ุฎุงุต
        * lsof -i -u^root
* [-p] โ PID
    * lsof -p 1 โ Pid=1
* [/<dir>] โ Display Files of a Specific Filesystem
    * lsof / sys/
    * [+d]: ุฌููฺฏุฑ ุงุฒ ฺฏุฑุฏุด ุดุฏู ุนู ููุงุด ุชูุงู ุฒุฑ ูุณุฑูุง
    * lsof +d /proc
* TerminalFiles โ
    * lsof /dev/tty*
* [-c] โ Display Files Used by a Process Name
    * lsof -c ssh
    * lsof -c firefox
* [-R] โ Add Parent pid(PPID) at output as a new column
* [-d] โ ููุชุฑ ุจุฑ ุญุณุจ ุณุชูู ุงููโุฏ ุนู ุณุชูู ฺูุงุฑู
    * lsof -d mem โ All memory map files
    * lsof -d cwd

### 14.7.3. โ๏ธ Appendix

* [+L1] โ ุณูฺฉุชโูุง ูุนู ุณุฑูุฑ ฺฉู ุจู ูฺ ูุงู ุงุฒ ูุงุฑุฏ ูุตู ูุดุฏู ุงุณุช - ูพุฑุฏุงุฒูโูุง ููุฌูุฏ ุฏุฑ ุฑู ฺฉู ููฺฉู ุงุณุช ูุฑูุณ ุจุงุดูุฏ
    * lsof +L1
* deletedFiles
    * sudo lsof [path] | grep deleted

## 14.8. ๐ฑ๏ธ netstat

* [ุฎุงู ู ุจุฏูู ูพุงุฑุงูุชุฑ ูุฑูุฏ] โ By default, netstat displays a list of open sockets.
* [-i] or [--interfaces,] โ Display a table of all network interfaces
* [-s] or [--statistics] โ Display summary statistics for each protocol
* [-r] or [--route,] โ [route -e] โ Display the kernel routing tables
* [-g] or [--groups,] โ Display multicast group membership information for IPv4 and IPv6
* [-t] or [--tcp]โ display TCP sockets
* [-u] or [--udp] โ display UDP sockets
* [-l] โ display only listening sockets
* [-n] โ display the socketโs port number

## 14.9. ๐ฑ๏ธ nmap

* ุชุนุฑู NullScan: ุจุณุชู ูฺ ูพุฑฺู(TCPุ UDPุ Syncุ Httpุ ICMP ู ุบุฑู) ุจู ุฎูุฏ ููโฺฏุฑุฏ.
    * ุงฺฏุฑ ฺฉ ุณุฑูุฑ ูฺ ูพุงุณุฎ ูุฏุงุฏ ุดูุง ูโุชูุงูุฏ ููุน ุงุณฺฉู ุฑุง ุฏุฑ ูุถุนุช Null Scan ูุฑุงุฑ ุฏูุฏ ฺฉู ุฏุฑ ุขู ุตูุฑุช ุญุชูุง ุจุณุชู ุนุจูุฑ ูโฺฉูุฏ ู ุญุฏุงูู ูโุชูุงู ูููุฏ ฺฉู ุณุฑูุฑ alive ูุณุช ุง ูพุงู ุงุณุช
* ุชุนุฑู Zombi Attach: ููุฒูุงู ุจู ฺูุฏู ุณุณุชู ุฒุงูุจโุดุฏู(ูุฑุจุงูโูุง ุจุณุชุฑ ุงูุชุฑูุช) ูโฺฏูู ฺฉู ุจู ฺฉ ุณุฑูุฑ ูุตู ุดููุฏ ู ฺฉุงุฑ ุงูุฌุงู ุฏููุฏ ู ฺฏุฒุงุฑุด ุฎุฑูุฌ ุญููู ุฑุง ุฏุฑ ุงุฎุชุงุฑูุงู ูุฑุงุฑ ุฏููุฏ ู ูุง ูุงุดูุงุฎุชู ุฎูุงูู ูุงูุฏ

### 14.9.1. โ๏ธ Ping

* nmap -Pn [target] #Dont ping
* nmap -sP [target] #perform a Ping Only Scan
* nmap -PS [target] #TCP SYN Ping
* nmap -PA [target] #TCP ACK Ping
* nmap -PU [target] #UDP Ping
* nmap -PY [target] #SCTP INIT Ping
* nmap -PE [target] #ICMP Echo Ping
* nmap -PP [target] #ICMP Timestamp Ping
* nmap -PM [target] #CMP Address Mask Ping
* nmap -PO [target] #IP Protocol Ping

### 14.9.2. โ๏ธ Trace

* nmap โtraceroute     [target] #Traceroute
* nmap --packet-trace [target] #Trace package

### 14.9.3. โ๏ธ DNS

* nmap -R [target] #Force Reverse DNS Resolution
* nmap -n [target] #Disable Reverse DNS Resolution
* nmap โsystem-dns [target] #Alternative DNS Lookup
* nmap โdns-servers [servers] [target] #Manually Specify DNS Server(s)
* nmap -sL [targets] #Create a Host List

### 14.9.4. โ๏ธ Advanced Scanning Options

* nmap -sS [target] #TCP SYN Scan
* nmap -sT [target] #TCP Connect Scan
* nmap -sU [target] #UDP Scan
* nmap -sN [target] #TCP NULL Scan
* nmap -sF [target] #TCP FIN Scan
* nmap -sX [target] #Xmas Scan
* nmap -sA [target] #TCP ACK Scan
* nmap โscanflags [flags] [target] #Custom TCP Scan
    * nmap โscanflags SYNFIN 192.168.0.1
* nmap -sO [target] #IP Protocol Scan
* nmap โsend-eth [target] #Send Raw Ethernet Packets
* nmap โsend-ip [target] #Send IP Packets

### 14.9.5. โ๏ธ Port Scan

* nmap -sV -n [target] ุณุฑูุณโูุง ุฏุฑุญุงู ุงุฌุฑุง
* nmap -F [target] #Perform a Fast Scan
* nmap -p [port(s)] [target] #Scan Specific Ports
      * nmap -p 21-25,80,139,8080 192.168.1.1
* nmap -p [portName(s)] [target] #Scan Ports by Name
      * nmap -p ftp,http* 192.168.0.1
* nmap -sU -sT -p U: [ports],T:[ports] [target] #Scan Ports by Protocol
      * nmap -sU -sT -p U:53,111,137,T:21- 25,80,139,8080 192.168.0.1
* nmap -p โ*โ [target] #Scan All Ports
* nmap โtop-ports [number] [target] #Scan Top Ports
* nmap -r [target] #Perform a Sequential Port Scan

### 14.9.6. โ๏ธ Version Detection

* nmap -O [target] #Operating System Detection
* nmap -O โosscan guess [target] #Attempt to Guess an Unknown OS
* nmap -sV [target] #Service Version Detection
* nmap -sV โversion trace [target] #Troubleshooting Version Scans
* nmap -sR [target] #Perform a RPC Scan

### 14.9.7. โ๏ธ Firewall Evasion Techniques

* nmap -f [target] #augment Packets
* nmap โmtu [MTU] [target] #pacify a Specific MTU
    * nmap โmtu 32 192.168.0.1
* nmap -D RND:[number] [target] #Use a Decoy
* nmap -D RND:10 192.168.0.1
* nmap -sI [zombie] [target] #Zombie Scan
* nmap โsource-port [port] [target] #Manually Specify a Source Port
* nmap โdata-length [size] [target] #Append Random Data
    * nmap โdata-length 2 192.168.0.1
* nmap โrandomize-hosts [target] #Randomize Target Scan Order
    * nmap โrandomize-ho 192.168.0.1-20
* nmap โspoof-mac [MAC|0|vendor] [target] #Spoof MAC Address
    * nmap โspoof-mac Cis 192.168.0.1
* nmap โbadsum [target] #Send Bad Checksums

### 14.9.8. โ๏ธ Troubleshooting And Debugging

* nmap -h #Getting Help
* nmap -V #Display nmap Version
* nmap -v [target] #Verbose Output
* nmap -d [target] #Debugging
* nmap โreason [target] #Display Port State Reason
* nmap โopen [target] #Only Display Open Ports
* nmap โpacket-trace [target] #Trace Packets
* nmap โiflist #Display Host Networking
* nmap -e [interface] [target] #Specify a Network Interface
    * nmap -e eth0 192.168.0.1

### 14.9.9. โ๏ธ nmap Scripting Engine

* nmap โscript [script.nse] [target] #Execute Individual Scripts
* nmap โscript [expression] [target] #Execute Multiple Scripts
    * nmap โscript โhttp-*โ 192.168.0.1
* nmap โscript [category] [target] #Execute Scripts by Category
    * Script Categories: all, auth, default, discovery, external, intrusive, malware, safe, vuln
    * nmap โscript โnot intrusiveโ 192.168.0.1
* nmap โscript [category1,category2,etc] #Execute Multiple Script Categories
    * nmap โscript โdefault or safeโ 192.168.0.1
* nmap โscript [script] โscript trace [target] #Troubleshoot Scripts
    * nmap โscript banner.nse โscript-trace 192.168.0.1
* nmap โscript-updatedb #Update the Script Database

## 14.10. ๐ฑ๏ธ nmcli

```shell
nmcli connection show
nmcli connection show -a #only the active connections
nmcli connection [down|up] <Name> #[Up|Down] connections (By connections name) 
nmcli device status
nmcli device show
nmcli device show enp3s0
nmcli device [connect|disconnect] <NCname> #enabling|disconnect] an interface
nmcli device wifi list
nmcli general status
nmcli general #status is default action
nmcli general hostname #ููุงุด ูุงู ูุงุณุช
nmcli general hostname <NewName>
nmcli general permission #Show caller permissions for authenticated operations
nmcli general permission #Listing NetworkManager polkit permissions 
nmcli general logging
nmcli general logging level INFO
nmcli general logging domains ETHER
nmcli general logging domains WIFI
nmcli general logging domains ALL
nmcli general logging level INFO domains ALL
```

## 14.11. ๐ฑ๏ธ tcpdump

ุฏุณุชูุฑ ูููฺฉุณ ุจุฑุง ฺฏูุด ฺฉุฑุฏู ุจู ุดุจฺฉู- ุณูฺโูุง

### 14.11.1. โ๏ธ Switch

* [-c] โ Capture Only N Number of Packets
    * sudo tcpdump -c 5
* [-i] โ Capture Packets from Specific Interface
    * sudo tcpdump -i eth0
    * sudo tcpdump -i any
* [-A] โ Print Captured Packets in ASCII
    * sudo tcpdump -A
* [-w] โ Capture and Save Packets in a File
    * sudo tcpdump -w /tmp/0001.pcap
* [-r] โ Read Captured Packets File
    * sudo tcpdump -r 0001.pcap
* [tcp] โ Capture only TCP Packets
    * sudo tcpdump tcp
* [port n] โ Capture Packet from Specific Port
    * sudo tcpdump port 22
* [src] โ Capture Packets from source IP
    * sudo tcpdump src 192.168.0.2
* [dst] โ Capture Packets from destination IP
    * sudo tcpdump dst 50.116.66.139
* [-D] โ Display available interfaces
    * sudo tcpdump -D
        1. enp3s0 [Up, Running, Connected]
        2. any (Pseudo-device that captures on all interfaces) [Up, Running]
        3. lo [Up, Running, Loopback]
        4. bluetooth-monitor (Bluetooth Linux Monitor) [Wireless]
        5. nflog (Linux netfilter log (NFLOG) interface) [none]
        6. nfqueue (Linux netfilter queue (NFQUEUE) interface) [none]
        7. dbus-system (D-Bus system bus) [none]
        8. dbus-session (D-Bus session bus) [none]
* [-n] โ show IP address replace name (disable name resolution)(Only IP address packets)
    * tcpdump -n
* [-nn] โ show port address replace name (disable port resolution with -nn)
* [-XX] โ Display Captured Packets in HEX
* [--number] โ show packet numbers in output
* [-t] โ omit timestamp info from tcpdump outpu
* [-v] โ show detailed output
* [icmp] โ capture ICMP packets only
* [host ip] โ only packets related to a specific host
    * tcpdump host 10.0.20.150
* [broadcast] โ capture broadcasts
    * tcpdump broadcast
* [multicast] โ capture multicast
    * tcpdump multicast
* [] โ
* [] โ

### 14.11.2. โ๏ธ Examples

* tcpdump src NUMBER && dst port NUMBER
* tcpdump dst ff:ff:ff:ff:ff:ff
* tcpdump broadcast and multicast
* tcpdump broadcast && multicast
* tcpdump tcp and host 169.144.0.1 or host 169.144.0.20
    * tcp packages between 2 hosts
* โ tcpdump src 169.144.0.1 and port 22 and dst 169.144.0.20 and port 22
    * Only ssh packages between 2 hosts
* tcpdump -i any -c5 -nn src 192.168.122.98 and port 80 โ #filter packets from source IP address 192.168.122.98 and
  service HTTP only
* tcpdump -i any -c5 -nn "port 80 and (src 192.168.122.98 or src 54.204.39.132)" โ #filtering packets for HTTP service
  only (port 80) and source IP addresses 192.168.122.98 or 54.204.39.132

## 14.12. ๐ฑ๏ธ Hosname

```shell
# 23. show
hostnamectl #Show change config
hostname
hostname -s #displayed the computer short name
hostname -f #displays the computer FQDN in the network
cat /etc/hostname

# 24. Change
ุฑูุด ุงูู:#
hostnamectl set-hostname NAME

ุฑูุด ุฏูู:#
vim /etc/hosts #Add new hostname
vim /etc/hostname 
vim /etc/sysconfig/network
hostname XXXXX
/etc/init.d/hostname.sh start
```

# 15. ๐ฐ๏ธProduction

## 15.1. ๐ฑ๏ธCISCO

PacketTracer: ูุฑูโุงูุฒุงุฑ ุณุณฺฉู ุจุฑุง ุดุจู ุณุงุฒ ูุญุท ูุงูุน ุดุจฺฉู

## 15.2. ๐ฑ๏ธOpenwrt

* ุงุฒูุญุงุธ ุณุงุฎุชุงุฑ ููุงููุฏ ูฺฉุฑูุชฺฉ (MicroTik) ูโุจุงุดุฏ ูู ููุฏุงุฑ ุฑุณูุฑุณ ุจุดุชุฑ ูโุฎูุงูุฏ ูุณุจุช ุจู ูฺฉุฑูุชฺฉ
* ุจุฑูพุงู Debian ุงุณุช ู ุจุณุชูโูุง ุจุง ูพุณููุฏ deb ูโุจุงุดุฏ
* ุงู ูุญุตูู OpenSource ุงุณุช



## 15.2. ๐ฑ๏ธMicrotik

* ุฑู ุฒุงุฏ ููโุฎูุงูุฏ
* ูุณุจุช ุจู openWrt ุฑุณูุฑุณ ฺฉูุชุฑ ุงุดุบุงู ูฺฉูุฏ


</div>





![IP.png](./_srcFiles/Images/IP.png "IP.png")
![fundamentalip-ipv4oct1.jpg](./_srcFiles/Images/fundamentalip-ipv4oct1.jpg "fundamentalip-ipv4oct1.jpg")
![fundamentalip-ipv6oct1.jpg](./_srcFiles/Images/fundamentalip-ipv6oct1.jpg "fundamentalip-ipv6oct1.jpg")
![fundamentalip-ositcp1.jpg](./_srcFiles/Images/fundamentalip-ositcp1.jpg "fundamentalip-ositcp1.jpg")
![MTU2.jpg](./_srcFiles/Images/MTU2.jpg "MTU2.jpg")